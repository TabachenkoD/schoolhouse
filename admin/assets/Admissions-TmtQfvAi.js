import{h as Ke,c as ve,r as n,j as e,a as $e,b as be,i as Ue,P as E,d as R,k as pe,e as Ye,f as S,g as je,B as P,u as He}from"./index-DrHww125.js";import{u as ge,a as z,S as Qe}from"./scroll-area-Cs58tVwZ.js";import{L as T,I as re,b as Q}from"./label-B1Nd_RMp.js";import{P as oe,a as le,f as B,b as ie,c as ce,S as de,d as ue,e as he,g as me,h as fe}from"./popover-CD9Yu6Pz.js";import{S as K}from"./switch-C8lhHP2e.js";var q="rovingFocusGroup.onEntryFocus",qe={bubbles:!1,cancelable:!0},$="RovingFocusGroup",[J,Te,ze]=Ke($),[Je,ye]=ve($,[ze]),[We,Xe]=Je($),Ne=n.forwardRef((t,s)=>e.jsx(J.Provider,{scope:t.__scopeRovingFocusGroup,children:e.jsx(J.Slot,{scope:t.__scopeRovingFocusGroup,children:e.jsx(Ze,{...t,ref:s})})}));Ne.displayName=$;var Ze=n.forwardRef((t,s)=>{const{__scopeRovingFocusGroup:a,orientation:o,loop:h=!1,dir:c,currentTabStopId:i,defaultCurrentTabStopId:m,onCurrentTabStopIdChange:b,onEntryFocus:d,preventScrollOnEntryFocus:f=!1,...r}=t,u=n.useRef(null),C=$e(s,u),v=ge(c),[y=null,w]=be({prop:i,defaultProp:m,onChange:b}),[g,N]=n.useState(!1),F=Ue(d),_=Te(a),I=n.useRef(!1),[M,L]=n.useState(0);return n.useEffect(()=>{const p=u.current;if(p)return p.addEventListener(q,F),()=>p.removeEventListener(q,F)},[F]),e.jsx(We,{scope:a,orientation:o,dir:v,loop:h,currentTabStopId:y,onItemFocus:n.useCallback(p=>w(p),[w]),onItemShiftTab:n.useCallback(()=>N(!0),[]),onFocusableItemAdd:n.useCallback(()=>L(p=>p+1),[]),onFocusableItemRemove:n.useCallback(()=>L(p=>p-1),[]),children:e.jsx(E.div,{tabIndex:g||M===0?-1:0,"data-orientation":o,...r,ref:C,style:{outline:"none",...t.style},onMouseDown:R(t.onMouseDown,()=>{I.current=!0}),onFocus:R(t.onFocus,p=>{const G=!I.current;if(p.target===p.currentTarget&&G&&!g){const V=new CustomEvent(q,qe);if(p.currentTarget.dispatchEvent(V),!V.defaultPrevented){const D=_().filter(l=>l.focusable),U=D.find(l=>l.active),Y=D.find(l=>l.id===y),O=[U,Y,...D].filter(Boolean).map(l=>l.ref.current);Re(O,f)}}I.current=!1}),onBlur:R(t.onBlur,()=>N(!1))})})}),Se="RovingFocusGroupItem",Ce=n.forwardRef((t,s)=>{const{__scopeRovingFocusGroup:a,focusable:o=!0,active:h=!1,tabStopId:c,...i}=t,m=pe(),b=c||m,d=Xe(Se,a),f=d.currentTabStopId===b,r=Te(a),{onFocusableItemAdd:u,onFocusableItemRemove:C}=d;return n.useEffect(()=>{if(o)return u(),()=>C()},[o,u,C]),e.jsx(J.ItemSlot,{scope:a,id:b,focusable:o,active:h,children:e.jsx(E.span,{tabIndex:f?0:-1,"data-orientation":d.orientation,...i,ref:s,onMouseDown:R(t.onMouseDown,v=>{o?d.onItemFocus(b):v.preventDefault()}),onFocus:R(t.onFocus,()=>d.onItemFocus(b)),onKeyDown:R(t.onKeyDown,v=>{if(v.key==="Tab"&&v.shiftKey){d.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const y=st(v,d.orientation,d.dir);if(y!==void 0){if(v.metaKey||v.ctrlKey||v.altKey||v.shiftKey)return;v.preventDefault();let g=r().filter(N=>N.focusable).map(N=>N.ref.current);if(y==="last")g.reverse();else if(y==="prev"||y==="next"){y==="prev"&&g.reverse();const N=g.indexOf(v.currentTarget);g=d.loop?at(g,N+1):g.slice(N+1)}setTimeout(()=>Re(g))}})})})});Ce.displayName=Se;var et={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function tt(t,s){return s!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function st(t,s,a){const o=tt(t.key,a);if(!(s==="vertical"&&["ArrowLeft","ArrowRight"].includes(o))&&!(s==="horizontal"&&["ArrowUp","ArrowDown"].includes(o)))return et[o]}function Re(t,s=!1){const a=document.activeElement;for(const o of t)if(o===a||(o.focus({preventScroll:s}),document.activeElement!==a))return}function at(t,s){return t.map((a,o)=>t[(s+o)%t.length])}var nt=Ne,rt=Ce,se="Tabs",[ot,pt]=ve(se,[ye]),we=ye(),[lt,ae]=ot(se),Fe=n.forwardRef((t,s)=>{const{__scopeTabs:a,value:o,onValueChange:h,defaultValue:c,orientation:i="horizontal",dir:m,activationMode:b="automatic",...d}=t,f=ge(m),[r,u]=be({prop:o,onChange:h,defaultProp:c});return e.jsx(lt,{scope:a,baseId:pe(),value:r,onValueChange:u,orientation:i,dir:f,activationMode:b,children:e.jsx(E.div,{dir:f,"data-orientation":i,...d,ref:s})})});Fe.displayName=se;var Ie="TabsList",Ae=n.forwardRef((t,s)=>{const{__scopeTabs:a,loop:o=!0,...h}=t,c=ae(Ie,a),i=we(a);return e.jsx(nt,{asChild:!0,...i,orientation:c.orientation,dir:c.dir,loop:o,children:e.jsx(E.div,{role:"tablist","aria-orientation":c.orientation,...h,ref:s})})});Ae.displayName=Ie;var Ee="TabsTrigger",De=n.forwardRef((t,s)=>{const{__scopeTabs:a,value:o,disabled:h=!1,...c}=t,i=ae(Ee,a),m=we(a),b=_e(i.baseId,o),d=Me(i.baseId,o),f=o===i.value;return e.jsx(rt,{asChild:!0,...m,focusable:!h,active:f,children:e.jsx(E.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":d,"data-state":f?"active":"inactive","data-disabled":h?"":void 0,disabled:h,id:b,...c,ref:s,onMouseDown:R(t.onMouseDown,r=>{!h&&r.button===0&&r.ctrlKey===!1?i.onValueChange(o):r.preventDefault()}),onKeyDown:R(t.onKeyDown,r=>{[" ","Enter"].includes(r.key)&&i.onValueChange(o)}),onFocus:R(t.onFocus,()=>{const r=i.activationMode!=="manual";!f&&!h&&r&&i.onValueChange(o)})})})});De.displayName=Ee;var ke="TabsContent",Pe=n.forwardRef((t,s)=>{const{__scopeTabs:a,value:o,forceMount:h,children:c,...i}=t,m=ae(ke,a),b=_e(m.baseId,o),d=Me(m.baseId,o),f=o===m.value,r=n.useRef(f);return n.useEffect(()=>{const u=requestAnimationFrame(()=>r.current=!1);return()=>cancelAnimationFrame(u)},[]),e.jsx(Ye,{present:h||f,children:({present:u})=>e.jsx(E.div,{"data-state":f?"active":"inactive","data-orientation":m.orientation,role:"tabpanel","aria-labelledby":b,hidden:!u,id:d,tabIndex:0,...i,ref:s,style:{...t.style,animationDuration:r.current?"0s":void 0},children:u&&c})})});Pe.displayName=ke;function _e(t,s){return`${t}-trigger-${s}`}function Me(t,s){return`${t}-content-${s}`}var it=Fe,Le=Ae,Ge=De,Ve=Pe;const ct=it,Oe=n.forwardRef(({className:t,...s},a)=>e.jsx(Le,{ref:a,className:S("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...s}));Oe.displayName=Le.displayName;const W=n.forwardRef(({className:t,...s},a)=>e.jsx(Ge,{ref:a,className:S("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...s}));W.displayName=Ge.displayName;const X=n.forwardRef(({className:t,...s},a)=>e.jsx(Ve,{ref:a,className:S("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...s}));X.displayName=Ve.displayName;const Z=n.forwardRef(({className:t,...s},a)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:a,className:S("w-full caption-bottom text-sm",t),...s})}));Z.displayName="Table";const ee=n.forwardRef(({className:t,...s},a)=>e.jsx("thead",{ref:a,className:S("[&_tr]:border-b",t),...s}));ee.displayName="TableHeader";const te=n.forwardRef(({className:t,...s},a)=>e.jsx("tbody",{ref:a,className:S("[&_tr:last-child]:border-0",t),...s}));te.displayName="TableBody";const dt=n.forwardRef(({className:t,...s},a)=>e.jsx("tfoot",{ref:a,className:S("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...s}));dt.displayName="TableFooter";const A=n.forwardRef(({className:t,...s},a)=>e.jsx("tr",{ref:a,className:S("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...s}));A.displayName="TableRow";const j=n.forwardRef(({className:t,...s},a)=>e.jsx("th",{ref:a,className:S("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...s}));j.displayName="TableHead";const x=n.forwardRef(({className:t,...s},a)=>e.jsx("td",{ref:a,className:S("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...s}));x.displayName="TableCell";const ut=n.forwardRef(({className:t,...s},a)=>e.jsx("caption",{ref:a,className:S("mt-4 text-sm text-muted-foreground",t),...s}));ut.displayName="TableCaption";const xe=[{label:"9:00-12:30",startTime:"9:00",endTime:"12:30"},{label:"13:00-16:30",startTime:"13:00",endTime:"16:30"}],ht=({isAuthenticated:t})=>{var O;je();const[s,a]=n.useState(""),[o,h]=n.useState(null),[c,i]=n.useState(null),[m,b]=n.useState(null),[d,f]=n.useState(""),[r,u]=n.useState(!1),[C,v]=n.useState(!1),[y,w]=n.useState(!1),[g,N]=n.useState(!1),[F,_]=n.useState(null),[I,M]=n.useState(null),[L,p]=n.useState();n.useState(!1);const[G,V]=n.useState([]),D=s&&o&&c&&d&&F&&I;n.useEffect(()=>{z("/admin/eventcat",t).then(l=>{V(l)})},[]);const U=()=>{a(""),h(null),i(null),b(null),f(""),u(!1),v(!1),w(!1),N(!1),_(null),M(null),p(null)},Y=l=>{const k=xe.find(H=>H.label===l);k&&(_(k.startTime),M(k.endTime),p(l))},ne=l=>{l.preventDefault();const k=c?B(c,"MM/dd/yyyy"):"",H=m?B(m,"MM/dd/yyyy"):"",Be={Title:s,EventCategoryId:Number(o),StartDate:k,EndDate:H,Capacity:Number(d),Recurs:r,IsAllDay:C,Featured:y,Active:g,StartTime:F,EndTime:I};console.log(Be)};return e.jsxs("form",{onSubmit:ne,className:"space-y-4 w-[700px] px-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(T,{htmlFor:"title",children:"Title"}),e.jsx(re,{id:"title",value:s,onChange:l=>a(l.target.value),required:!0})]}),e.jsxs("div",{className:"flex gap-x-4",children:[e.jsxs("div",{className:"flex flex-col gap-2 w-1/3",children:[e.jsx(T,{children:"Start Date"}),e.jsxs(oe,{className:"p-0",children:[e.jsx(le,{asChild:!0,children:e.jsx(P,{variant:"outline",children:c?B(c,"MM/dd/yyyy"):"Pick a date"})}),e.jsx(ie,{className:"p-0",children:e.jsx(ce,{mode:"single",selected:c,onSelect:i,className:"rounded-md border"})})]})]}),e.jsxs("div",{className:"flex flex-col gap-2 w-1/3",children:[e.jsx(T,{children:"End Date (optional)"}),e.jsxs(oe,{className:"p-0",children:[e.jsx(le,{asChild:!0,children:e.jsx(P,{variant:"outline",children:m?B(m,"MM/dd/yyyy"):"Pick a date"})}),e.jsx(ie,{className:"p-0",children:e.jsx(ce,{mode:"single",selected:m,onSelect:b,className:"rounded-md border"})})]})]}),e.jsxs("div",{className:"flex flex-col gap-2 w-1/3",children:[e.jsx(T,{htmlFor:"time-select",children:"Time"}),e.jsxs(de,{value:L,onValueChange:Y,children:[e.jsx(ue,{id:"time-select",children:e.jsx(he,{placeholder:"Select time slot"})}),e.jsx(me,{children:xe.map(l=>e.jsx(fe,{value:l.label,children:l.label},l.label))})]})]})]}),e.jsxs("div",{className:"flex gap-x-4",children:[e.jsxs("div",{className:"w-1/2",children:[e.jsx(T,{htmlFor:"category",className:"mb-2",children:"Event category"}),e.jsxs(de,{value:o,onValueChange:l=>h(l),children:[e.jsx(ue,{id:"category",children:e.jsx(he,{placeholder:"Select category",children:((O=G.find(l=>l.CategoryId===Number(o)))==null?void 0:O.Title)||"Select category"})}),e.jsx(me,{children:G.map(l=>e.jsx(fe,{value:l.CategoryId,children:e.jsx("div",{className:"flex items-center gap-3 pl-3",children:l.Title})},l.CategoryId))})]})]}),e.jsxs("div",{className:"w-1/2",children:[e.jsx(T,{htmlFor:"capacity",children:"Capacity"}),e.jsx(re,{id:"capacity",value:d,type:"number",min:"0",onChange:l=>f(l.target.value),required:!0})]})]}),e.jsxs("div",{className:"flex gap-x-4",children:[e.jsxs("div",{className:"flex items-center gap-2 w-1/4",children:[e.jsx(T,{htmlFor:"Recurs",children:"Recurs"}),e.jsx(K,{id:"Recurs",checked:r,onCheckedChange:u,className:"data-[state=checked]:bg-dark-blue"}),e.jsx(T,{htmlFor:"Recurs",children:r?"Yes":"No"})]}),e.jsxs("div",{className:"flex items-center gap-2 w-1/4",children:[e.jsx(T,{htmlFor:"isAllDay",children:"Is All Day"}),e.jsx(K,{id:"isAllDay",checked:C,onCheckedChange:v,className:"data-[state=checked]:bg-dark-blue"}),e.jsx(T,{htmlFor:"isAllDay",children:C?"Yes":"No"})]}),e.jsxs("div",{className:"flex items-center gap-2 w-1/4",children:[e.jsx(T,{htmlFor:"featured",children:"Featured"}),e.jsx(K,{id:"featured",checked:y,onCheckedChange:w,className:"data-[state=checked]:bg-dark-blue"}),e.jsx(T,{htmlFor:"featured",children:y?"Yes":"No"})]}),e.jsxs("div",{className:"flex items-center gap-2 w-1/4",children:[e.jsx(T,{htmlFor:"Active",children:"Active"}),e.jsx(K,{id:"Active",checked:g,onCheckedChange:N,className:"data-[state=checked]:bg-dark-blue"}),e.jsx(T,{htmlFor:"Active",children:g?"Yes":"No"})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(P,{type:"reset",variant:"secondary",onClick:U,children:"Reset"}),e.jsx(P,{type:"submit",disabled:!D,children:"Create shedule"})]})]})},jt=()=>{const{isAuthenticated:t}=He(),{toast:s}=je(),[a,o]=n.useState([]);n.useState(null);const[h,c]=n.useState(null),[i,m]=n.useState(null);n.useEffect(()=>{b()},[]);const b=()=>{t&&z("/reservations",t).then(r=>{o(r)}).catch(r=>{s({variant:"destructive",description:`${r}`})})},d=r=>{z(`/reservations/${r}/details`,t).then(u=>{m(u),c(r)}).catch(u=>{s({variant:"destructive",description:`Error fetching details: ${u}`})})},f=()=>{c(null),m(null)};return e.jsx("div",{className:"overflow-hidden flex flex-row h-full w-full",children:e.jsxs(ct,{defaultValue:"Reservations",className:"w-full",children:[e.jsxs(Oe,{children:[e.jsx(W,{value:"Reservations",children:"Reservations"}),e.jsx(W,{value:"admissionschedule",children:"Admission Schedule"})]}),e.jsx(X,{value:"Reservations",children:h===null?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-4",children:e.jsx(Q,{className:"mb-4",children:"Reservations"})}),e.jsx(Qe,{className:"overflow-hidden flex-1 h-full w-full overflow-auto max-h-screen",children:e.jsx("div",{className:"flex flex-wrap gap-y-4 px-4 gap-x-4",children:a.length===0?e.jsx("p",{children:"No admissions available"}):e.jsxs(Z,{children:[e.jsx(ee,{children:e.jsxs(A,{children:[e.jsx(j,{children:"Title"}),e.jsx(j,{children:"Admission Schedule Id"}),e.jsx(j,{children:"Reservation Id"}),e.jsx(j,{children:"Reservation Count"}),e.jsx(j,{children:"Start Date"}),e.jsx(j,{children:"Start Time"}),e.jsx(j,{children:"End Time"}),e.jsx(j,{children:"Schedule Capacity"}),e.jsx(j,{children:"Active"})]})}),e.jsx(te,{children:a.map(r=>e.jsxs(A,{children:[e.jsx(x,{children:r.Title}),e.jsx(x,{className:"cursor-pointer text-dark-blue",onClick:()=>d(r.AdmissionScheduleId),children:r.AdmissionScheduleId}),e.jsx(x,{children:r.ReservationId}),e.jsx(x,{children:r.ReservationCount}),e.jsx(x,{children:r.StartDate}),e.jsx(x,{children:r.StartTime}),e.jsx(x,{children:r.EndTime}),e.jsx(x,{children:r.ScheduleCapacity}),e.jsx(x,{children:r.Active?"Yes":"No"})]},r.ReservationId))})]})})})]}):e.jsxs("div",{className:"p-4",children:[e.jsxs(Q,{className:"mb-4",children:[e.jsx(P,{className:"mr-4",onClick:f,children:"Back to Reservations"}),"Schedule Details for ID: ",h]}),i?e.jsx("div",{children:e.jsxs(Z,{children:[e.jsx(ee,{children:e.jsxs(A,{children:[e.jsx(j,{children:"Reservation Id"}),e.jsx(j,{children:"Customer Name"}),e.jsx(j,{children:"Subtotal Price"}),e.jsx(j,{children:"Total Quantity"}),e.jsx(j,{children:"Confirmation Number"}),e.jsx(j,{children:"Visitors"})]})}),e.jsx(te,{children:i.map(r=>e.jsxs(A,{children:[e.jsx(x,{children:r.ReservationId}),e.jsx(x,{children:r.CustomerName}),e.jsx(x,{children:r.SubtotalPrice}),e.jsx(x,{children:r.TotalQuantity}),e.jsx(x,{children:r.ConfirmationNumber}),e.jsx(x,{children:r.LineItems.map((u,C)=>e.jsxs(A,{children:[e.jsx(x,{children:u.Type}),e.jsxs(x,{children:["Quantity: ",u.Quantity]}),e.jsxs(x,{children:["Price: ",u.Price]})]},C))})]},r.ReservationId))})]})}):e.jsx("p",{children:"Loading..."})]})}),e.jsxs(X,{value:"admissionschedule",children:[e.jsx("div",{className:"p-4",children:e.jsx(Q,{className:"mb-4",children:"Admission Schedule"})}),e.jsx(ht,{isAuthenticated:t})]})]})})};export{jt as default};
