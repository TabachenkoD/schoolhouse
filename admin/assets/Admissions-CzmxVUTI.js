import{r as a,j as e,f as m,g as le,B as g,u as he}from"./index-DK2cnkCl.js";import{a as A,S as xe}from"./scroll-area-DyjiM8WC.js";import{b as D}from"./card-BRs_dFeb.js";import{T as me,a as ue,b as _,c as O}from"./tabs-BHSSt7Sa.js";import{L as n,I as z}from"./label-C2K86RTK.js";import{P as G,a as J,f as T,b as K,c as U,S as W,d as X,e as Z,g as ee,h as se}from"./popover-DKfY1mEm.js";import{S as C}from"./switch-f2MMfdbU.js";const F=a.forwardRef(({className:l,...t},d)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:d,className:m("w-full caption-bottom text-sm",l),...t})}));F.displayName="Table";const E=a.forwardRef(({className:l,...t},d)=>e.jsx("thead",{ref:d,className:m("[&_tr]:border-b",l),...t}));E.displayName="TableHeader";const P=a.forwardRef(({className:l,...t},d)=>e.jsx("tbody",{ref:d,className:m("[&_tr:last-child]:border-0",l),...t}));P.displayName="TableBody";const je=a.forwardRef(({className:l,...t},d)=>e.jsx("tfoot",{ref:d,className:m("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",l),...t}));je.displayName="TableFooter";const j=a.forwardRef(({className:l,...t},d)=>e.jsx("tr",{ref:d,className:m("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",l),...t}));j.displayName="TableRow";const i=a.forwardRef(({className:l,...t},d)=>e.jsx("th",{ref:d,className:m("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",l),...t}));i.displayName="TableHead";const r=a.forwardRef(({className:l,...t},d)=>e.jsx("td",{ref:d,className:m("p-4 align-middle [&:has([role=checkbox])]:pr-0",l),...t}));r.displayName="TableCell";const fe=a.forwardRef(({className:l,...t},d)=>e.jsx("caption",{ref:d,className:m("mt-4 text-sm text-muted-foreground",l),...t}));fe.displayName="TableCaption";const ae=[{label:"9:00-12:30",startTime:"9:00",endTime:"12:30"},{label:"13:00-16:30",startTime:"13:00",endTime:"16:30"}],pe=({isAuthenticated:l})=>{var q;le();const[t,d]=a.useState(""),[u,f]=a.useState(null),[h,p]=a.useState(null),[x,y]=a.useState(null),[v,S]=a.useState(""),[s,o]=a.useState(!1),[b,I]=a.useState(!1),[R,M]=a.useState(!1),[w,L]=a.useState(!1),[B,V]=a.useState(null),[Y,H]=a.useState(null),[te,Q]=a.useState();a.useState(!1);const[$,ce]=a.useState([]),de=t&&u&&h&&v&&B&&Y;a.useEffect(()=>{A("/admin/eventcat",l).then(c=>{ce(c)})},[]);const re=()=>{d(""),f(null),p(null),y(null),S(""),o(!1),I(!1),M(!1),L(!1),V(null),H(null),Q(null)},ie=c=>{const N=ae.find(k=>k.label===c);N&&(V(N.startTime),H(N.endTime),Q(c))},ne=c=>{c.preventDefault();const N=h?T(h,"MM/dd/yyyy"):"",k=x?T(x,"MM/dd/yyyy"):"",oe={Title:t,EventCategoryId:Number(u),StartDate:N,EndDate:k,Capacity:Number(v),Recurs:s,IsAllDay:b,Featured:R,Active:w,StartTime:B,EndTime:Y};console.log(oe)};return e.jsxs("form",{onSubmit:ne,className:"space-y-4 w-[700px] px-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(n,{htmlFor:"title",children:"Title"}),e.jsx(z,{id:"title",value:t,onChange:c=>d(c.target.value),required:!0})]}),e.jsxs("div",{className:"flex gap-x-4",children:[e.jsxs("div",{className:"flex flex-col gap-2 w-1/3",children:[e.jsx(n,{children:"Start Date"}),e.jsxs(G,{className:"p-0",children:[e.jsx(J,{asChild:!0,children:e.jsx(g,{variant:"outline",children:h?T(h,"MM/dd/yyyy"):"Pick a date"})}),e.jsx(K,{className:"p-0",children:e.jsx(U,{mode:"single",selected:h,onSelect:p,className:"rounded-md border"})})]})]}),e.jsxs("div",{className:"flex flex-col gap-2 w-1/3",children:[e.jsx(n,{children:"End Date (optional)"}),e.jsxs(G,{className:"p-0",children:[e.jsx(J,{asChild:!0,children:e.jsx(g,{variant:"outline",children:x?T(x,"MM/dd/yyyy"):"Pick a date"})}),e.jsx(K,{className:"p-0",children:e.jsx(U,{mode:"single",selected:x,onSelect:y,className:"rounded-md border"})})]})]}),e.jsxs("div",{className:"flex flex-col gap-2 w-1/3",children:[e.jsx(n,{htmlFor:"time-select",children:"Time"}),e.jsxs(W,{value:te,onValueChange:ie,children:[e.jsx(X,{id:"time-select",children:e.jsx(Z,{placeholder:"Select time slot"})}),e.jsx(ee,{children:ae.map(c=>e.jsx(se,{value:c.label,children:c.label},c.label))})]})]})]}),e.jsxs("div",{className:"flex gap-x-4",children:[e.jsxs("div",{className:"w-1/2",children:[e.jsx(n,{htmlFor:"category",className:"mb-2",children:"Event category"}),e.jsxs(W,{value:u,onValueChange:c=>f(c),children:[e.jsx(X,{id:"category",children:e.jsx(Z,{placeholder:"Select category",children:((q=$.find(c=>c.CategoryId===Number(u)))==null?void 0:q.Title)||"Select category"})}),e.jsx(ee,{children:$.map(c=>e.jsx(se,{value:c.CategoryId,children:e.jsx("div",{className:"flex items-center gap-3 pl-3",children:c.Title})},c.CategoryId))})]})]}),e.jsxs("div",{className:"w-1/2",children:[e.jsx(n,{htmlFor:"capacity",children:"Capacity"}),e.jsx(z,{id:"capacity",value:v,type:"number",min:"0",onChange:c=>S(c.target.value),required:!0})]})]}),e.jsxs("div",{className:"flex gap-x-4",children:[e.jsxs("div",{className:"flex items-center gap-2 w-1/4",children:[e.jsx(n,{htmlFor:"Recurs",children:"Recurs"}),e.jsx(C,{id:"Recurs",checked:s,onCheckedChange:o,className:"data-[state=checked]:bg-dark-blue"}),e.jsx(n,{htmlFor:"Recurs",children:s?"Yes":"No"})]}),e.jsxs("div",{className:"flex items-center gap-2 w-1/4",children:[e.jsx(n,{htmlFor:"isAllDay",children:"Is All Day"}),e.jsx(C,{id:"isAllDay",checked:b,onCheckedChange:I,className:"data-[state=checked]:bg-dark-blue"}),e.jsx(n,{htmlFor:"isAllDay",children:b?"Yes":"No"})]}),e.jsxs("div",{className:"flex items-center gap-2 w-1/4",children:[e.jsx(n,{htmlFor:"featured",children:"Featured"}),e.jsx(C,{id:"featured",checked:R,onCheckedChange:M,className:"data-[state=checked]:bg-dark-blue"}),e.jsx(n,{htmlFor:"featured",children:R?"Yes":"No"})]}),e.jsxs("div",{className:"flex items-center gap-2 w-1/4",children:[e.jsx(n,{htmlFor:"Active",children:"Active"}),e.jsx(C,{id:"Active",checked:w,onCheckedChange:L,className:"data-[state=checked]:bg-dark-blue"}),e.jsx(n,{htmlFor:"Active",children:w?"Yes":"No"})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(g,{type:"reset",variant:"secondary",onClick:re,children:"Reset"}),e.jsx(g,{type:"submit",disabled:!de,children:"Create shedule"})]})]})},Ce=()=>{const{isAuthenticated:l}=he(),{toast:t}=le(),[d,u]=a.useState([]);a.useState(null);const[f,h]=a.useState(null),[p,x]=a.useState(null);a.useEffect(()=>{y()},[]);const y=()=>{l&&A("/admin/reservations/all",l).then(s=>{u(s)}).catch(s=>{t({variant:"destructive",description:`${s}`})})},v=s=>{A(`/admin/reservations/${s}/details`,l).then(o=>{x(o),h(s)}).catch(o=>{t({variant:"destructive",description:`Error fetching details: ${o}`})})},S=()=>{h(null),x(null)};return e.jsx("div",{className:"overflow-hidden flex flex-row h-full w-full",children:e.jsxs(me,{defaultValue:"Reservations",className:"w-full",children:[e.jsxs(ue,{children:[e.jsx(_,{value:"Reservations",children:"Reservations"}),e.jsx(_,{value:"admissionschedule",children:"Admission Schedule"})]}),e.jsx(O,{value:"Reservations",children:f===null?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-4",children:e.jsx(D,{className:"mb-4",children:"Reservations"})}),e.jsx(xe,{className:"overflow-hidden flex-1 h-full w-full overflow-auto max-h-screen",children:e.jsx("div",{className:"flex flex-wrap gap-y-4 px-4 gap-x-4",children:d.length===0?e.jsx("p",{children:"No admissions available"}):e.jsxs(F,{children:[e.jsx(E,{children:e.jsxs(j,{children:[e.jsx(i,{children:"Title"}),e.jsx(i,{children:"Admission Schedule Id"}),e.jsx(i,{children:"Reservation Id"}),e.jsx(i,{children:"Reservation Count"}),e.jsx(i,{children:"Start Date"}),e.jsx(i,{children:"Start Time"}),e.jsx(i,{children:"End Time"}),e.jsx(i,{children:"Schedule Capacity"}),e.jsx(i,{children:"Active"})]})}),e.jsx(P,{children:d.map(s=>e.jsxs(j,{children:[e.jsx(r,{children:s.Title}),e.jsx(r,{className:"cursor-pointer text-dark-blue",onClick:()=>v(s.AdmissionScheduleId),children:s.AdmissionScheduleId}),e.jsx(r,{children:s.ReservationId}),e.jsx(r,{children:s.ReservationCount}),e.jsx(r,{children:s.StartDate}),e.jsx(r,{children:s.StartTime}),e.jsx(r,{children:s.EndTime}),e.jsx(r,{children:s.ScheduleCapacity}),e.jsx(r,{children:s.Active?"Yes":"No"})]},s.ReservationId))})]})})})]}):e.jsxs("div",{className:"p-4",children:[e.jsxs(D,{className:"mb-4",children:[e.jsx(g,{className:"mr-4",onClick:S,children:"Back to Reservations"}),"Schedule Details for ID: ",f]}),p?e.jsx("div",{children:e.jsxs(F,{children:[e.jsx(E,{children:e.jsxs(j,{children:[e.jsx(i,{children:"Reservation Id"}),e.jsx(i,{children:"Customer Name"}),e.jsx(i,{children:"Subtotal Price"}),e.jsx(i,{children:"Total Quantity"}),e.jsx(i,{children:"Confirmation Number"}),e.jsx(i,{children:"Visitors"})]})}),e.jsx(P,{children:p.map(s=>e.jsxs(j,{children:[e.jsx(r,{children:s.ReservationId}),e.jsx(r,{children:s.CustomerName}),e.jsx(r,{children:s.SubtotalPrice}),e.jsx(r,{children:s.TotalQuantity}),e.jsx(r,{children:s.ConfirmationNumber}),e.jsx(r,{children:s.LineItems.map((o,b)=>e.jsxs(j,{children:[e.jsx(r,{children:o.Type}),e.jsxs(r,{children:["Quantity: ",o.Quantity]}),e.jsxs(r,{children:["Price: ",o.Price]})]},b))})]},s.ReservationId))})]})}):e.jsx("p",{children:"Loading..."})]})}),e.jsxs(O,{value:"admissionschedule",children:[e.jsx("div",{className:"p-4",children:e.jsx(D,{className:"mb-4",children:"Admission Schedule"})}),e.jsx(pe,{isAuthenticated:l})]})]})})};export{Ce as default};
