import{g,r as a,j as e,B as m,u as N}from"./index-D7UtJkO3.js";import{a as v,S as T}from"./scroll-area-B6hqRRsp.js";import{L as f,I as y,b,C as S,a as w,c as D,d as M}from"./label-TL96Cb40.js";const P=({selectedType:t,handleTypeUpdated:c,isAuthenticated:h,resetType:u})=>{const{toast:r}=g(),[i,l]=a.useState(""),[d,o]=a.useState(""),s=i&&d&&t;a.useEffect(()=>{t?(l(t.Description),o(t.Price)):n()},[t]);const n=()=>{l(""),o(""),u()},x=p=>{p.preventDefault();const C={...t,Description:i,Price:d};v("/admin/membershiptypes/update",h,{method:"POST",body:JSON.stringify(C)}).then(j=>{r({variant:"success",description:"Type updated successfully"}),n(),c()}).catch(j=>{r({variant:"destructive",description:`${j}`})})};return e.jsxs("form",{onSubmit:x,className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-x-4",children:[e.jsxs("div",{className:"w-2/4",children:[e.jsx(f,{htmlFor:"title",children:"Title"}),e.jsx(y,{id:"title",value:i,onChange:p=>l(p.target.value),required:!0})]}),e.jsxs("div",{className:"w-2/4",children:[e.jsx(f,{htmlFor:"Capacity",children:"Price"}),e.jsx(y,{id:"Capacity",type:"number",min:"0",value:d,onChange:p=>o(p.target.value),required:!0})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(m,{type:"reset",variant:"secondary",onClick:n,children:"Reset"}),e.jsx(m,{type:"submit",disabled:!s,children:"Update type"})]})]})},k=()=>{const{isAuthenticated:t}=N(),[c,h]=a.useState([]),[u,r]=a.useState(null);a.useEffect(()=>{i()},[]);const i=()=>{t&&v("/admin/membershiptypes",t).then(s=>{h(s)}).catch(s=>{console.error("Ошибка при получении данных классов:",s)})},l=s=>{const n=c.find(x=>x.MembershipTypeId===s);console.log(n),r(n)},d=()=>{i(),r(null)},o=()=>r(null);return e.jsxs("div",{className:"overflow-hidden flex flex-row h-full w-full",children:[e.jsxs("div",{className:"w-[60%] p-4",children:[e.jsx(b,{className:"mb-4",children:" Update type "}),e.jsx(P,{selectedType:u,handleTypeUpdated:d,isAuthenticated:t,resetType:o})]}),e.jsx(T,{className:"border-l overflow-hidden flex-1 h-full w-[40%] overflow-auto max-h-screen",children:e.jsx("div",{className:"p-4 space-y-4",children:c.length===0?e.jsx("p",{children:"No membership types available"}):c.map(s=>e.jsxs(S,{children:[e.jsxs(w,{className:"flex-row justify-between items-top",children:[e.jsxs("div",{children:[e.jsx(b,{children:s.Description}),e.jsxs(D,{children:["MembershipTypeId: ",s.MembershipTypeId]})]}),e.jsx(m,{style:{margin:0},variant:"orange",size:"sm",onClick:()=>l(s.MembershipTypeId),children:"Update"})]}),e.jsxs(M,{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Adults Count:"})," ",s.AdultsCount]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Guess Count:"})," ",s.GuessCount]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Kids Count:"})," ",s.KidsCount]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Price:"})," ",s.Price]})]})]},s.MembershipTypeId))})})]})};export{k as default};
