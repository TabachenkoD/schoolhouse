import{g as E,r as a,j as e,B as f,u as A}from"./index-DnsmjvTF.js";import{a as N,S as T}from"./scroll-area-6klhdVqF.js";import{b as y,C as F,a as U,c as k,d as I}from"./card-D7h5gnRL.js";import{L as x,I as b}from"./label-DhnHuYjJ.js";import{S as D}from"./switch-DtlLovEV.js";const $=({selectedCategory:s,handleCatUpdated:c,isAuthenticated:v,resetCat:p})=>{const{toast:i}=E(),[n,l]=a.useState(""),[d,o]=a.useState(""),[t,h]=a.useState(!0),[r,C]=a.useState(!1),S=n&&d;a.useEffect(()=>{s?(l(s.Title),o(s.Capacity),h(s.Active),C(!0)):m()},[s]);const m=()=>{l(""),o(""),h(!0),C(!1),p()},w=u=>{u.preventDefault();const g={Title:n,Capacity:Number(d),Active:t,Color:"#777"};r&&s&&(g.CategoryId=s.CategoryId),N(r?"/admin/eventcat/update ":"/admin/eventcat/create",v,{method:"POST",body:JSON.stringify(g)}).then(j=>{i({variant:"success",description:`${r?"Event category updated successfully":`Event category ${j} created successfully `}`}),m(),c()}).catch(j=>{i({variant:"destructive",description:`${j}`})})};return e.jsxs("form",{onSubmit:w,className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-x-4",children:[e.jsxs("div",{className:"w-2/4",children:[e.jsx(x,{htmlFor:"title",children:"Title"}),e.jsx(b,{id:"title",value:n,onChange:u=>l(u.target.value),required:!0})]}),e.jsxs("div",{className:"w-2/4",children:[e.jsx(x,{htmlFor:"Capacity",children:"Capacity"}),e.jsx(b,{id:"Capacity",type:"number",min:"0",value:d,onChange:u=>o(u.target.value),required:!0})]})]}),e.jsxs("div",{className:"flex items-center gap-x-2",children:[e.jsx(x,{htmlFor:"is-enabled",children:"Active"}),e.jsx(D,{id:"is-enabled",checked:t,onCheckedChange:h,className:"data-[state=checked]:bg-dark-blue"}),e.jsx(x,{htmlFor:"is-enabled",children:t?"Yes":"No"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(f,{type:"reset",variant:"secondary",onClick:m,children:"Reset"}),e.jsx(f,{type:"submit",disabled:!S,children:r?"Update event category":"Create event category"})]})]})},z=()=>{const{isAuthenticated:s}=A(),[c,v]=a.useState([]),[p,i]=a.useState(null);a.useEffect(()=>{n()},[]);const n=()=>{N("/admin/eventcat",s).then(t=>{v(t)})},l=t=>{const h=c.find(r=>r.CategoryId===t);i(h)},d=()=>{n(),i(null)},o=()=>i(null);return e.jsxs("div",{className:"overflow-hidden flex flex-row h-full w-full",children:[e.jsxs("div",{className:"w-[60%] p-4",children:[e.jsx(y,{className:"mb-4",children:p?"Update event category":"Create event category"}),e.jsx($,{selectedCategory:p,handleCatUpdated:d,isAuthenticated:s,resetCat:o})]}),e.jsx(T,{className:"border-l overflow-hidden flex-1 h-full w-[40%] overflow-auto max-h-screen",children:e.jsx("div",{className:"p-4 space-y-4",children:c.length===0?e.jsx("p",{children:"No events categories available"}):c.map(t=>e.jsxs(F,{children:[e.jsxs(U,{className:"flex-row justify-between items-top",children:[e.jsxs("div",{children:[e.jsx(y,{children:t.Title}),e.jsxs(k,{children:["CategoryId: ",t.CategoryId]})]}),e.jsx(f,{style:{margin:0},variant:"orange",size:"sm",onClick:()=>l(t.CategoryId),children:"Update"})]}),e.jsxs(I,{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Capacity:"})," ",t.Capacity]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Active:"})," ",t.Active?"Yes":"No"]})]})]},t.CategoryId))})})]})};export{z as default};
