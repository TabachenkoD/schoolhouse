import{h as De,c as ne,r as n,j as e,a as ke,b as oe,i as Pe,P as E,d as R,k as ce,e as _e,f as S,g as ie,B as P,u as Me}from"./index-D7UtJkO3.js";import{u as le,a as Y,S as Le}from"./scroll-area-B6hqRRsp.js";import{L as y,I as ee,b as $}from"./label-TL96Cb40.js";import{P as se,a as te,f as L,b as ae,c as re,S as Ge,d as Ve,e as Be,g as Ke,h as Oe}from"./popover-BM6X04ZE.js";import{S as G}from"./switch-D6SEgrgH.js";var U="rovingFocusGroup.onEntryFocus",$e={bubbles:!1,cancelable:!0},V="RovingFocusGroup",[H,de,Ue]=De(V),[Ye,ue]=ne(V,[Ue]),[He,Qe]=Ye(V),fe=n.forwardRef((s,t)=>e.jsx(H.Provider,{scope:s.__scopeRovingFocusGroup,children:e.jsx(H.Slot,{scope:s.__scopeRovingFocusGroup,children:e.jsx(qe,{...s,ref:t})})}));fe.displayName=V;var qe=n.forwardRef((s,t)=>{const{__scopeRovingFocusGroup:a,orientation:o,loop:u=!1,dir:i,currentTabStopId:c,defaultCurrentTabStopId:f,onCurrentTabStopIdChange:v,onEntryFocus:l,preventScrollOnEntryFocus:h=!1,...r}=s,d=n.useRef(null),C=ke(t,d),x=le(i),[N=null,F]=oe({prop:c,defaultProp:f,onChange:v}),[g,T]=n.useState(!1),I=Pe(l),B=de(a),D=n.useRef(!1),[K,_]=n.useState(0);return n.useEffect(()=>{const b=d.current;if(b)return b.addEventListener(U,I),()=>b.removeEventListener(U,I)},[I]),e.jsx(He,{scope:a,orientation:o,dir:x,loop:u,currentTabStopId:N,onItemFocus:n.useCallback(b=>F(b),[F]),onItemShiftTab:n.useCallback(()=>T(!0),[]),onFocusableItemAdd:n.useCallback(()=>_(b=>b+1),[]),onFocusableItemRemove:n.useCallback(()=>_(b=>b-1),[]),children:e.jsx(E.div,{tabIndex:g||K===0?-1:0,"data-orientation":o,...r,ref:C,style:{outline:"none",...s.style},onMouseDown:R(s.onMouseDown,()=>{D.current=!0}),onFocus:R(s.onFocus,b=>{const p=!D.current;if(b.target===b.currentTarget&&p&&!g){const M=new CustomEvent(U,$e);if(b.currentTarget.dispatchEvent(M),!M.defaultPrevented){const k=B().filter(w=>w.focusable),O=k.find(w=>w.active),Ae=k.find(w=>w.id===N),Ee=[O,Ae,...k].filter(Boolean).map(w=>w.ref.current);xe(Ee,h)}}D.current=!1}),onBlur:R(s.onBlur,()=>T(!1))})})}),he="RovingFocusGroupItem",me=n.forwardRef((s,t)=>{const{__scopeRovingFocusGroup:a,focusable:o=!0,active:u=!1,tabStopId:i,...c}=s,f=ce(),v=i||f,l=Qe(he,a),h=l.currentTabStopId===v,r=de(a),{onFocusableItemAdd:d,onFocusableItemRemove:C}=l;return n.useEffect(()=>{if(o)return d(),()=>C()},[o,d,C]),e.jsx(H.ItemSlot,{scope:a,id:v,focusable:o,active:u,children:e.jsx(E.span,{tabIndex:h?0:-1,"data-orientation":l.orientation,...c,ref:t,onMouseDown:R(s.onMouseDown,x=>{o?l.onItemFocus(v):x.preventDefault()}),onFocus:R(s.onFocus,()=>l.onItemFocus(v)),onKeyDown:R(s.onKeyDown,x=>{if(x.key==="Tab"&&x.shiftKey){l.onItemShiftTab();return}if(x.target!==x.currentTarget)return;const N=We(x,l.orientation,l.dir);if(N!==void 0){if(x.metaKey||x.ctrlKey||x.altKey||x.shiftKey)return;x.preventDefault();let g=r().filter(T=>T.focusable).map(T=>T.ref.current);if(N==="last")g.reverse();else if(N==="prev"||N==="next"){N==="prev"&&g.reverse();const T=g.indexOf(x.currentTarget);g=l.loop?Xe(g,T+1):g.slice(T+1)}setTimeout(()=>xe(g))}})})})});me.displayName=he;var ze={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Je(s,t){return t!=="rtl"?s:s==="ArrowLeft"?"ArrowRight":s==="ArrowRight"?"ArrowLeft":s}function We(s,t,a){const o=Je(s.key,a);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(o))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(o)))return ze[o]}function xe(s,t=!1){const a=document.activeElement;for(const o of s)if(o===a||(o.focus({preventScroll:t}),document.activeElement!==a))return}function Xe(s,t){return s.map((a,o)=>s[(t+o)%s.length])}var Ze=fe,es=me,X="Tabs",[ss,ms]=ne(X,[ue]),ve=ue(),[ts,Z]=ss(X),pe=n.forwardRef((s,t)=>{const{__scopeTabs:a,value:o,onValueChange:u,defaultValue:i,orientation:c="horizontal",dir:f,activationMode:v="automatic",...l}=s,h=le(f),[r,d]=oe({prop:o,onChange:u,defaultProp:i});return e.jsx(ts,{scope:a,baseId:ce(),value:r,onValueChange:d,orientation:c,dir:h,activationMode:v,children:e.jsx(E.div,{dir:h,"data-orientation":c,...l,ref:t})})});pe.displayName=X;var be="TabsList",je=n.forwardRef((s,t)=>{const{__scopeTabs:a,loop:o=!0,...u}=s,i=Z(be,a),c=ve(a);return e.jsx(Ze,{asChild:!0,...c,orientation:i.orientation,dir:i.dir,loop:o,children:e.jsx(E.div,{role:"tablist","aria-orientation":i.orientation,...u,ref:t})})});je.displayName=be;var ge="TabsTrigger",ye=n.forwardRef((s,t)=>{const{__scopeTabs:a,value:o,disabled:u=!1,...i}=s,c=Z(ge,a),f=ve(a),v=Se(c.baseId,o),l=Ce(c.baseId,o),h=o===c.value;return e.jsx(es,{asChild:!0,...f,focusable:!u,active:h,children:e.jsx(E.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":l,"data-state":h?"active":"inactive","data-disabled":u?"":void 0,disabled:u,id:v,...i,ref:t,onMouseDown:R(s.onMouseDown,r=>{!u&&r.button===0&&r.ctrlKey===!1?c.onValueChange(o):r.preventDefault()}),onKeyDown:R(s.onKeyDown,r=>{[" ","Enter"].includes(r.key)&&c.onValueChange(o)}),onFocus:R(s.onFocus,()=>{const r=c.activationMode!=="manual";!h&&!u&&r&&c.onValueChange(o)})})})});ye.displayName=ge;var Ne="TabsContent",Te=n.forwardRef((s,t)=>{const{__scopeTabs:a,value:o,forceMount:u,children:i,...c}=s,f=Z(Ne,a),v=Se(f.baseId,o),l=Ce(f.baseId,o),h=o===f.value,r=n.useRef(h);return n.useEffect(()=>{const d=requestAnimationFrame(()=>r.current=!1);return()=>cancelAnimationFrame(d)},[]),e.jsx(_e,{present:u||h,children:({present:d})=>e.jsx(E.div,{"data-state":h?"active":"inactive","data-orientation":f.orientation,role:"tabpanel","aria-labelledby":v,hidden:!d,id:l,tabIndex:0,...c,ref:t,style:{...s.style,animationDuration:r.current?"0s":void 0},children:d&&i})})});Te.displayName=Ne;function Se(s,t){return`${s}-trigger-${t}`}function Ce(s,t){return`${s}-content-${t}`}var as=pe,Re=je,we=ye,Fe=Te;const rs=as,Ie=n.forwardRef(({className:s,...t},a)=>e.jsx(Re,{ref:a,className:S("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...t}));Ie.displayName=Re.displayName;const Q=n.forwardRef(({className:s,...t},a)=>e.jsx(we,{ref:a,className:S("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s),...t}));Q.displayName=we.displayName;const q=n.forwardRef(({className:s,...t},a)=>e.jsx(Fe,{ref:a,className:S("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...t}));q.displayName=Fe.displayName;const z=n.forwardRef(({className:s,...t},a)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:a,className:S("w-full caption-bottom text-sm",s),...t})}));z.displayName="Table";const J=n.forwardRef(({className:s,...t},a)=>e.jsx("thead",{ref:a,className:S("[&_tr]:border-b",s),...t}));J.displayName="TableHeader";const W=n.forwardRef(({className:s,...t},a)=>e.jsx("tbody",{ref:a,className:S("[&_tr:last-child]:border-0",s),...t}));W.displayName="TableBody";const ns=n.forwardRef(({className:s,...t},a)=>e.jsx("tfoot",{ref:a,className:S("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",s),...t}));ns.displayName="TableFooter";const A=n.forwardRef(({className:s,...t},a)=>e.jsx("tr",{ref:a,className:S("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",s),...t}));A.displayName="TableRow";const j=n.forwardRef(({className:s,...t},a)=>e.jsx("th",{ref:a,className:S("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",s),...t}));j.displayName="TableHead";const m=n.forwardRef(({className:s,...t},a)=>e.jsx("td",{ref:a,className:S("p-4 align-middle [&:has([role=checkbox])]:pr-0",s),...t}));m.displayName="TableCell";const os=n.forwardRef(({className:s,...t},a)=>e.jsx("caption",{ref:a,className:S("mt-4 text-sm text-muted-foreground",s),...t}));os.displayName="TableCaption";const cs=({isAuthenticated:s})=>{var b;ie();const[t,a]=n.useState(""),[o,u]=n.useState(null),[i,c]=n.useState(null),[f,v]=n.useState(null),[l,h]=n.useState(""),[r,d]=n.useState(!1),[C,x]=n.useState(!1),[N,F]=n.useState(!1),[g,T]=n.useState(!1);n.useState(!1);const[I,B]=n.useState([]),D=t&&o&&i&&l;n.useEffect(()=>{Y("/admin/eventcat",s).then(p=>{B(p)})},[]);const K=()=>{a(""),u(null),c(null),v(null),h(""),d(!1),x(!1),F(!1),T(!1)},_=p=>{p.preventDefault();const M=i?L(i,"MM/dd/yyyy"):"",k=f?L(f,"MM/dd/yyyy"):"",O={Title:t,EventCategoryId:Number(o),StartDate:M,EndDate:k,Capacity:Number(l),Recurs:r,IsAllDay:C,Featured:N,Active:g};console.log(O)};return e.jsxs("form",{onSubmit:_,className:"space-y-4 w-[700px] px-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(y,{htmlFor:"title",children:"Title"}),e.jsx(ee,{id:"title",value:t,onChange:p=>a(p.target.value),required:!0})]}),e.jsxs("div",{className:"flex gap-x-4",children:[e.jsxs("div",{className:"flex flex-col gap-2 w-1/2",children:[e.jsx(y,{children:"Start Date"}),e.jsxs(se,{className:"p-0",children:[e.jsx(te,{asChild:!0,children:e.jsx(P,{variant:"outline",children:i?L(i,"MM/dd/yyyy"):"Pick a date"})}),e.jsx(ae,{className:"p-0",children:e.jsx(re,{mode:"single",selected:i,onSelect:c,className:"rounded-md border"})})]})]}),e.jsxs("div",{className:"flex flex-col gap-2 w-1/2",children:[e.jsx(y,{children:"End Date (optional)"}),e.jsxs(se,{className:"p-0",children:[e.jsx(te,{asChild:!0,children:e.jsx(P,{variant:"outline",children:f?L(f,"MM/dd/yyyy"):"Pick a date"})}),e.jsx(ae,{className:"p-0",children:e.jsx(re,{mode:"single",selected:f,onSelect:v,className:"rounded-md border"})})]})]})]}),e.jsxs("div",{className:"flex gap-x-4",children:[e.jsxs("div",{className:"w-1/2",children:[e.jsx(y,{htmlFor:"category",className:"mb-2",children:"Event category"}),e.jsxs(Ge,{value:o,onValueChange:p=>u(p),children:[e.jsx(Ve,{id:"category",children:e.jsx(Be,{placeholder:"Select category",children:((b=I.find(p=>p.CategoryId===Number(o)))==null?void 0:b.Title)||"Select category"})}),e.jsx(Ke,{children:I.map(p=>e.jsx(Oe,{value:p.CategoryId,children:e.jsx("div",{className:"flex items-center gap-3 pl-3",children:p.Title})},p.CategoryId))})]})]}),e.jsxs("div",{className:"w-1/2",children:[e.jsx(y,{htmlFor:"capacity",children:"Capacity"}),e.jsx(ee,{id:"capacity",value:l,type:"number",min:"0",onChange:p=>h(p.target.value),required:!0})]})]}),e.jsxs("div",{className:"flex gap-x-4",children:[e.jsxs("div",{className:"flex items-center gap-2 w-1/4",children:[e.jsx(y,{htmlFor:"Recurs",children:"Recurs"}),e.jsx(G,{id:"Recurs",checked:r,onCheckedChange:d,className:"data-[state=checked]:bg-dark-blue"}),e.jsx(y,{htmlFor:"Recurs",children:r?"Yes":"No"})]}),e.jsxs("div",{className:"flex items-center gap-2 w-1/4",children:[e.jsx(y,{htmlFor:"isAllDay",children:"Is All Day"}),e.jsx(G,{id:"isAllDay",checked:C,onCheckedChange:x,className:"data-[state=checked]:bg-dark-blue"}),e.jsx(y,{htmlFor:"isAllDay",children:C?"Yes":"No"})]}),e.jsxs("div",{className:"flex items-center gap-2 w-1/4",children:[e.jsx(y,{htmlFor:"featured",children:"Featured"}),e.jsx(G,{id:"featured",checked:N,onCheckedChange:F,className:"data-[state=checked]:bg-dark-blue"}),e.jsx(y,{htmlFor:"featured",children:N?"Yes":"No"})]}),e.jsxs("div",{className:"flex items-center gap-2 w-1/4",children:[e.jsx(y,{htmlFor:"Active",children:"Active"}),e.jsx(G,{id:"Active",checked:g,onCheckedChange:T,className:"data-[state=checked]:bg-dark-blue"}),e.jsx(y,{htmlFor:"Active",children:g?"Yes":"No"})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(P,{type:"reset",variant:"secondary",onClick:K,children:"Reset"}),e.jsx(P,{type:"submit",disabled:!D,children:"Create shedule"})]})]})},xs=()=>{const{isAuthenticated:s}=Me(),{toast:t}=ie(),[a,o]=n.useState([]);n.useState(null);const[u,i]=n.useState(null),[c,f]=n.useState(null);n.useEffect(()=>{v()},[]);const v=()=>{s&&Y("/reservations",s).then(r=>{o(r)}).catch(r=>{t({variant:"destructive",description:`${r}`})})},l=r=>{Y(`/reservations/${r}/details`,s).then(d=>{f(d),i(r)}).catch(d=>{t({variant:"destructive",description:`Error fetching details: ${d}`})})},h=()=>{i(null),f(null)};return e.jsx("div",{className:"overflow-hidden flex flex-row h-full w-full",children:e.jsxs(rs,{defaultValue:"Reservations",className:"w-full",children:[e.jsxs(Ie,{children:[e.jsx(Q,{value:"Reservations",children:"Reservations"}),e.jsx(Q,{value:"admissionschedule",children:"Admission Schedule"})]}),e.jsx(q,{value:"Reservations",children:u===null?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-4",children:e.jsx($,{className:"mb-4",children:"Reservations"})}),e.jsx(Le,{className:"overflow-hidden flex-1 h-full w-full overflow-auto max-h-screen",children:e.jsx("div",{className:"flex flex-wrap gap-y-4 px-4 gap-x-4",children:a.length===0?e.jsx("p",{children:"No admissions available"}):e.jsxs(z,{children:[e.jsx(J,{children:e.jsxs(A,{children:[e.jsx(j,{children:"Title"}),e.jsx(j,{children:"Admission Schedule Id"}),e.jsx(j,{children:"Reservation Id"}),e.jsx(j,{children:"Reservation Count"}),e.jsx(j,{children:"Start Date"}),e.jsx(j,{children:"Start Time"}),e.jsx(j,{children:"End Time"}),e.jsx(j,{children:"Schedule Capacity"}),e.jsx(j,{children:"Active"})]})}),e.jsx(W,{children:a.map(r=>e.jsxs(A,{children:[e.jsx(m,{children:r.Title}),e.jsx(m,{className:"cursor-pointer text-dark-blue",onClick:()=>l(r.AdmissionScheduleId),children:r.AdmissionScheduleId}),e.jsx(m,{children:r.ReservationId}),e.jsx(m,{children:r.ReservationCount}),e.jsx(m,{children:r.StartDate}),e.jsx(m,{children:r.StartTime}),e.jsx(m,{children:r.EndTime}),e.jsx(m,{children:r.ScheduleCapacity}),e.jsx(m,{children:r.Active?"Yes":"No"})]},r.ReservationId))})]})})})]}):e.jsxs("div",{className:"p-4",children:[e.jsxs($,{className:"mb-4",children:[e.jsx(P,{className:"mr-4",onClick:h,children:"Back to Reservations"}),"Schedule Details for ID: ",u]}),c?e.jsx("div",{children:e.jsxs(z,{children:[e.jsx(J,{children:e.jsxs(A,{children:[e.jsx(j,{children:"Reservation Id"}),e.jsx(j,{children:"Customer Name"}),e.jsx(j,{children:"Subtotal Price"}),e.jsx(j,{children:"Total Quantity"}),e.jsx(j,{children:"Confirmation Number"}),e.jsx(j,{children:"Visitors"})]})}),e.jsx(W,{children:c.map(r=>e.jsxs(A,{children:[e.jsx(m,{children:r.ReservationId}),e.jsx(m,{children:r.CustomerName}),e.jsx(m,{children:r.SubtotalPrice}),e.jsx(m,{children:r.TotalQuantity}),e.jsx(m,{children:r.ConfirmationNumber}),e.jsx(m,{children:r.LineItems.map((d,C)=>e.jsxs(A,{children:[e.jsx(m,{children:d.Type}),e.jsxs(m,{children:["Quantity: ",d.Quantity]}),e.jsxs(m,{children:["Price: ",d.Price]})]},C))})]},r.ReservationId))})]})}):e.jsx("p",{children:"Loading..."})]})}),e.jsxs(q,{value:"admissionschedule",children:[e.jsx("div",{className:"p-4",children:e.jsx($,{className:"mb-4",children:"Admission Schedule"})}),e.jsx(cs,{isAuthenticated:s})]})]})})};export{xs as default};
