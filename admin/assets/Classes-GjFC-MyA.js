import{a as W,r as a,j as e,B as x,u as K}from"./index-Klfigiyw.js";import{a as M}from"./index-CU5xcJei.js";import{S as Q}from"./scroll-area-DtPHnFpf.js";import{L as n,I as Y,b as O,C as X,a as Z,c as _,d as ee}from"./label-B8u5TA_V.js";import{T as se,S as te,a as ae,b as ne,c as re,d as le}from"./textarea-CiSmDFw0.js";import{S as V}from"./switch-D1C_JHt2.js";import{P as T,a as q,b as U,f as y,C as L}from"./popover-CxTK1n--.js";import{C as ce}from"./checkbox-BxQnXgh8.js";import"./Combination-Djma4IPE.js";import"./index-XWpe_29a.js";import"./index-Df-jDS1S.js";const ie=[{label:"None",color:""},{label:"2 mo - 2 yrs",color:"#00BFFF"},{label:"15 mo - 2.5 yrs",color:"#3366CC"},{label:"18 mo & Up",color:"#800080"},{label:"2.5 yrs - 5 yrs",color:"#FFA500"},{label:"3 yrs & Up",color:"#FF69B4"},{label:"All Ages",color:"#32CD32"},{label:"Special Events",color:"#ba2c36"}],de=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],oe=({selectedClassId:r,onClassUpdated:f,isAuthenticated:u,resetClassId:C})=>{const{toast:i}=W(),[c,d]=a.useState(""),[p,m]=a.useState(""),[j,t]=a.useState(""),[o,b]=a.useState(null),[h,E]=a.useState(null),[l,v]=a.useState([]),[N,S]=a.useState(!1),[D,R]=a.useState(""),[w,k]=a.useState(!0),[g,$]=a.useState(!1),z=c&&p&&j&&o&&h&&l&&D;a.useEffect(()=>{r?M(`/events/${r}/details`,u).then(s=>{d(s.Title),m(s.AgeRange),t(s.Description),b(new Date(s.EventStartDate)),E(new Date(s.EventEndDate)),v(s.EventRecurrency.split(", ")),S(s.RequirePayment),R(s.Capacity),k(s.IsEnabled),$(!0)}).catch(s=>{i({variant:"destructive",description:`${s}`})}):F()},[r]);const F=()=>{d(""),m(""),t(""),b(null),E(null),v([]),S(!1),R(""),k(!0),$(!1),C()},H=s=>{s.preventDefault();const A=o?y(o,"MM/dd/yyyy"):"",J=h?y(h,"MM/dd/yyyy"):"",G=l.join(", "),B={Title:c,AgeRange:p,Category:"Class",Description:j,EventStartDate:A,EventEndDate:J,EventRecurrency:G,Capacity:Number(D),RequirePayment:N,IsEnabled:w};g&&r&&(B.ClassEventId=r),M(g?"/events/update":"/events",u,{method:"POST",body:JSON.stringify(B)}).then(P=>{i({variant:"success",description:`${g?"Event updated successfully":`Event ${P} created successfully `}`}),F(),f()}).catch(P=>{i({variant:"destructive",description:`${P}`})})},I=s=>{l.includes(s)?v(l.filter(A=>A!==s)):v([...l,s])};return e.jsxs("form",{onSubmit:H,className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(n,{htmlFor:"title",children:"Title"}),e.jsx(Y,{id:"title",value:c,onChange:s=>d(s.target.value),required:!0})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(n,{htmlFor:"description",children:"Description"}),e.jsx(se,{id:"description",value:j,onChange:s=>t(s.target.value),required:!0})]}),e.jsxs("div",{className:"flex gap-x-4",children:[e.jsxs("div",{className:"flex flex-col gap-2 w-1/3",children:[e.jsx(n,{children:"Event Recurrency"}),e.jsxs(T,{children:[e.jsx(q,{asChild:!0,children:e.jsx(x,{variant:"outline",className:"overflow-hidden text-ellipsis whitespace-nowrap max-w-full",children:l.length>0?l.join(", "):"Select days of the week"})}),e.jsx(U,{className:"p-2",children:e.jsx("div",{className:"grid gap-1",children:de.map(s=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ce,{id:`day-${s}`,checked:l.includes(s),onCheckedChange:()=>I(s),className:"data-[state=checked]:bg-dark-blue "}),e.jsx(n,{htmlFor:`day-${s}`,children:s})]},s))})})]})]}),e.jsxs("div",{className:"flex flex-col gap-2 w-1/3",children:[e.jsx(n,{children:"Event Start Date"}),e.jsxs(T,{className:"p-0",children:[e.jsx(q,{asChild:!0,children:e.jsx(x,{variant:"outline",children:o?y(o,"MM/dd/yyyy"):"Pick a date"})}),e.jsx(U,{className:"p-0",children:e.jsx(L,{mode:"single",selected:o,onSelect:b,className:"rounded-md border"})})]})]}),e.jsxs("div",{className:"flex flex-col gap-2 w-1/3",children:[e.jsx(n,{children:"Event End Date"}),e.jsxs(T,{className:"p-0",children:[e.jsx(q,{asChild:!0,children:e.jsx(x,{variant:"outline",children:h?y(h,"MM/dd/yyyy"):"Pick a date"})}),e.jsx(U,{className:"p-0",children:e.jsx(L,{mode:"single",selected:h,onSelect:E,className:"rounded-md border"})})]})]})]}),e.jsxs("div",{className:"flex gap-x-4",children:[e.jsxs("div",{className:"w-2/4",children:[e.jsx(n,{htmlFor:"AgeRange",className:"mb-2",children:"Age Range"}),e.jsxs(te,{value:p,onValueChange:m,children:[e.jsx(ae,{id:"AgeRange",children:e.jsx(ne,{placeholder:"Select Age Range"})}),e.jsx(re,{children:ie.map(s=>e.jsx(le,{value:s.label,children:e.jsxs("div",{className:"flex items-center gap-3 pl-3",children:[e.jsx("span",{className:"block w-3.5 h-3.5 rounded",style:{backgroundColor:s.color}}),s.label]})},s.label))})]})]}),e.jsxs("div",{className:"w-2/4",children:[e.jsx(n,{htmlFor:"capacity",children:"Capacity"}),e.jsx(Y,{id:"capacity",value:D,type:"number",min:"0",onChange:s=>R(s.target.value),required:!0})]})]}),e.jsxs("div",{className:"flex gap-7",children:[e.jsxs("div",{className:"flex justify-center items-center gap-x-2",children:[e.jsx(n,{htmlFor:"require-payment",children:"Require Payment"}),e.jsx(V,{id:"require-payment",checked:N,onCheckedChange:S,className:"data-[state=checked]:bg-dark-blue"}),e.jsx(n,{htmlFor:"require-payment",children:N?"Yes":"No"})]}),e.jsxs("div",{className:"flex justify-center items-center gap-x-2",children:[e.jsx(n,{htmlFor:"is-enabled",children:"Is Enabled"}),e.jsx(V,{id:"is-enabled",checked:w,onCheckedChange:k,className:"data-[state=checked]:bg-dark-blue"}),e.jsx(n,{htmlFor:"is-enabled",children:w?"Yes":"No"})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(x,{type:"reset",variant:"secondary",onClick:F,children:"Reset"}),e.jsx(x,{type:"submit",disabled:!z,children:g?"Update Event":"Create Event"})]})]})},Ee=()=>{const{isAuthenticated:r}=K(),{toast:f}=W(),[u,C]=a.useState([]),[i,c]=a.useState(null);a.useEffect(()=>{d()},[]);const d=()=>{r&&M("/events",r).then(t=>{C(t)}).catch(t=>{f({variant:"destructive",description:`${t}`})})},p=t=>{c(t)},m=()=>{d(),c(null)},j=()=>c(null);return e.jsxs("div",{className:"overflow-hidden flex flex-row h-full w-full",children:[e.jsxs("div",{className:"w-[60%] p-4",children:[e.jsx(O,{className:"mb-4",children:i?"Update class":"Create new class"}),e.jsx(oe,{selectedClassId:i,onClassUpdated:m,isAuthenticated:r,resetClassId:j})]}),e.jsx(Q,{className:"border-l overflow-hidden flex-1 h-full w-[40%] overflow-auto max-h-screen",children:e.jsx("div",{className:"p-4 space-y-4",children:u.length===0?e.jsx("p",{children:"No events available"}):u.map(t=>e.jsxs(X,{children:[e.jsxs(Z,{className:"flex-row justify-between items-top",children:[e.jsxs("div",{children:[e.jsx(O,{children:t.Title}),e.jsxs(_,{children:["Event Id: ",t.ClassEventId]})]}),e.jsx(x,{style:{margin:0},variant:"orange",size:"sm",onClick:()=>p(t.ClassEventId),children:"Update"})]}),e.jsxs(ee,{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Caterory:"})," ",t.Category]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Age Range:"})," ",t.AgeRange]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Start Date:"})," ",t.EventStartDate]}),e.jsxs("p",{children:[e.jsx("strong",{children:"End Date:"})," ",t.EventEndDate]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Recurrency:"})," ",t.EventRecurrency]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Description:"})," ",t.Description]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Capacity:"})," ",t.Capacity]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Payment Required:"})," ",t.RequirePayment?"Yes":"No"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Enabled:"})," ",t.IsEnabled?"Yes":"No"]})]})]},t.ClassEventId))})})]})};export{Ee as default};
