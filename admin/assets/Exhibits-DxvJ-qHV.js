import{g as $,r as i,j as e,B as S,u as P}from"./index-DPu2GB5o.js";import{a as L,S as V}from"./scroll-area-Dqt0OvNV.js";import{L as u,I as C,b as E,C as k,a as q,c as H,d as R}from"./label-Bz_draER.js";import{T as B,a as M,b as I,c as N}from"./tabs-DsAPX7bH.js";import{T as _,S as z,a as K,b as W,c as X,d as F}from"./textarea-CWOLddNQ.js";import{D as Y,a as J,b as Q,c as Z}from"./dialog-DNqZl3Rm.js";import"./Combination-Dk6KfFMq.js";import"./index-Ajvjsxf3.js";import"./index-C9cfdYd8.js";const w=({exhibitId:a,isAuthenticated:m,resetExhibit:h})=>{const{toast:n}=$(),[o,r]=i.useState(""),[c,d]=i.useState(""),[x,p]=i.useState(""),[s,g]=i.useState(""),[T,b]=i.useState(null),[j,y]=i.useState(!1),G=o&&c&&x&&s&&T;i.useEffect(()=>{a?L(`/exhibits/${a}/details`,m).then(t=>{r(t.Title),d(t.Description),p(t.Floors),g(t.Groups),b(null),y(!0)}).catch(t=>{n({variant:"destructive",description:`${t}`})}):v()},[a]);const v=()=>{r(""),d(""),p(""),g(""),b(null),y(!1),typeof h=="function"&&h()},U=async t=>{t.preventDefault();const l=new FormData;l.append("exhibit",o),l.append("description",c),l.append("floor",x),l.append("group",s),l.append("Image",T),j&&l.append("ExhibitId",Number(a));const A=j?"/exhibits/update":"/exhibits",O="https://schoolhouse.hnhexpresssolutions.com";try{const f=await fetch(`${O}${A}`,{method:"POST",body:l,headers:{"X-API-KEY":m}}),D=await f.json();f.ok?(n({variant:"success",description:`${j?"Exhibit updated successfully":`Exhibit ${D} created successfully `}`}),v()):n({variant:"destructive",description:`${D.Message}`})}catch(f){n({variant:"destructive",description:`${f}`})}};return e.jsxs("form",{onSubmit:U,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(u,{htmlFor:"title",children:"Title"}),e.jsx(C,{id:"title",type:"text",value:o,onChange:t=>r(t.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"description",children:"Description"}),e.jsx(_,{id:"description",value:c,onChange:t=>d(t.target.value)})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"floor",className:"mb-2",children:"Floor"}),e.jsxs(z,{value:x,onValueChange:p,children:[e.jsx(K,{id:"floor",children:e.jsx(W,{placeholder:"Select floor"})}),e.jsxs(X,{children:[e.jsx(F,{value:"First floor",children:"First floor"}),e.jsx(F,{value:"Second floor",children:"Second floor"})]})]})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"group",children:"Group"}),e.jsx(C,{id:"group",type:"text",value:s,onChange:t=>g(t.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"file",children:"Image"}),e.jsx(C,{id:"file",type:"file",accept:"image/*",onChange:t=>b(t.target.files[0]),required:!0})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(S,{type:"reset",variant:"secondary",onClick:v,children:"Reset"}),e.jsx(S,{type:"submit",disabled:!G,children:j?"Update Exhibit":"Create Exhibit"})]})]})},ee="https://schoolhouse.hnhexpresssolutions.com/Content/Images/Exhibits/",de=()=>{const{isAuthenticated:a}=P(),{toast:m}=$(),[h,n]=i.useState([]),[o,r]=i.useState(!1),[c,d]=i.useState(null);i.useEffect(()=>{x()},[]);const x=()=>{a&&L("/exhibits",a).then(s=>{n(s)}).catch(s=>{m({variant:"destructive",description:`${s}`})})},p=()=>{d(null),r(!1)};return e.jsxs("div",{className:"overflow-hidden flex flex-row h-full w-full",children:[e.jsxs(B,{defaultValue:"List",className:"w-full",children:[e.jsxs(M,{children:[e.jsx(I,{value:"List",children:"List"}),e.jsx(I,{value:"Create",children:"Create"})]}),e.jsxs(N,{value:"List",children:[e.jsx("div",{className:"p-4",children:e.jsx(E,{className:"mb-4",children:"Exhibits"})}),e.jsx(V,{className:"overflow-hidden flex-1 h-full w-full overflow-auto max-h-screen",children:e.jsx("div",{className:"flex flex-wrap gap-y-4 px-4 gap-x-4",children:h.length===0?e.jsx("p",{children:"No exhibits available"}):h.map(s=>e.jsxs(k,{className:"w-[420px]",children:[e.jsxs(q,{className:"flex-row justify-between items-top",children:[e.jsxs("div",{children:[e.jsx(E,{children:s.Title}),e.jsxs(H,{children:["Exhibit Id: ",s.ExhibitId]})]}),e.jsx(S,{style:{margin:0},variant:"orange",size:"sm",onClick:()=>{d(s.ExhibitId),r(!0)},children:"Update"})]}),e.jsxs(R,{children:[e.jsx("img",{src:`${ee}/${s.ExhibitImageName}`,alt:s.Title,style:{maxWidth:"370px"}}),e.jsxs("p",{children:[e.jsx("strong",{children:"Description:"})," ",s.Description]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Floor:"})," ",s.Floors]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Group:"})," ",s.Groups]})]})]},s.ExhibitId))})})]}),e.jsx(N,{value:"Create",children:e.jsxs("div",{className:"p-4",children:[e.jsx(E,{className:"mb-4",children:"Create exhibit"}),e.jsx("div",{className:"w-1/3",children:e.jsx(w,{isAuthenticated:a})})]})})]}),o&&e.jsx(Y,{open:o,onOpenChange:r,children:e.jsxs(J,{children:[e.jsx(Q,{children:e.jsx(Z,{children:"Update Exhibit"})}),c?e.jsx(w,{exhibitId:c,isAuthenticated:a,resetExhibit:p}):e.jsx("p",{children:"Loading..."})]})})]})};export{de as default};
