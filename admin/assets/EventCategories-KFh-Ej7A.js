import{g as E,r as i,j as e,B as j,u as A}from"./index-D7UtJkO3.js";import{a as C,S as T}from"./scroll-area-B6hqRRsp.js";import{L as x,I as b,b as N,C as F,a as U,c as k,d as I}from"./label-TL96Cb40.js";import{S as $}from"./switch-D6SEgrgH.js";const D=({selectedCategory:s,handleCatUpdated:l,isAuthenticated:p,resetCat:v})=>{const{toast:n}=E(),[r,d]=i.useState(""),[o,h]=i.useState(""),[t,u]=i.useState(!0),[c,g]=i.useState(!1),S=r&&o;i.useEffect(()=>{s?(d(s.Title),h(s.Capacity),u(s.Active),g(!0)):m()},[s]);const m=()=>{d(""),h(""),u(!0),g(!1),v()};i.useEffect(()=>{C("/admin/events/9-30-2024/closed ",p,{method:"POST"}).then(a=>{console.log(a)}).catch(a=>{n({variant:"destructive",description:`${a}`})})},[]);const w=a=>{a.preventDefault();const y={Title:r,Capacity:Number(o),Active:t,Color:"#777"};c&&s&&(y.CategoryId=s.CategoryId),C(c?"/admin/eventcat/update ":"/admin/eventcat/create",p,{method:"POST",body:JSON.stringify(y)}).then(f=>{n({variant:"success",description:`${c?"Event category updated successfully":`Event category ${f} created successfully `}`}),m(),l()}).catch(f=>{n({variant:"destructive",description:`${f}`})})};return e.jsxs("form",{onSubmit:w,className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-x-4",children:[e.jsxs("div",{className:"w-2/4",children:[e.jsx(x,{htmlFor:"title",children:"Title"}),e.jsx(b,{id:"title",value:r,onChange:a=>d(a.target.value),required:!0})]}),e.jsxs("div",{className:"w-2/4",children:[e.jsx(x,{htmlFor:"Capacity",children:"Capacity"}),e.jsx(b,{id:"Capacity",type:"number",min:"0",value:o,onChange:a=>h(a.target.value),required:!0})]})]}),e.jsxs("div",{className:"flex items-center gap-x-2",children:[e.jsx(x,{htmlFor:"is-enabled",children:"Active"}),e.jsx($,{id:"is-enabled",checked:t,onCheckedChange:u,className:"data-[state=checked]:bg-dark-blue"}),e.jsx(x,{htmlFor:"is-enabled",children:t?"Yes":"No"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(j,{type:"reset",variant:"secondary",onClick:m,children:"Reset"}),e.jsx(j,{type:"submit",disabled:!S,children:c?"Update event category":"Create event category"})]})]})},R=()=>{const{isAuthenticated:s}=A(),[l,p]=i.useState([]),[v,n]=i.useState(null);i.useEffect(()=>{r()},[]);const r=()=>{C("/admin/eventcat",s).then(t=>{p(t)})},d=t=>{const u=l.find(c=>c.CategoryId===t);n(u)},o=()=>{r(),n(null)},h=()=>n(null);return e.jsxs("div",{className:"overflow-hidden flex flex-row h-full w-full",children:[e.jsxs("div",{className:"w-[60%] p-4",children:[e.jsx(N,{className:"mb-4",children:v?"Update event category":"Create event category"}),e.jsx(D,{selectedCategory:v,handleCatUpdated:o,isAuthenticated:s,resetCat:h})]}),e.jsx(T,{className:"border-l overflow-hidden flex-1 h-full w-[40%] overflow-auto max-h-screen",children:e.jsx("div",{className:"p-4 space-y-4",children:l.length===0?e.jsx("p",{children:"No events categories available"}):l.map(t=>e.jsxs(F,{children:[e.jsxs(U,{className:"flex-row justify-between items-top",children:[e.jsxs("div",{children:[e.jsx(N,{children:t.Title}),e.jsxs(k,{children:["CategoryId: ",t.CategoryId]})]}),e.jsx(j,{style:{margin:0},variant:"orange",size:"sm",onClick:()=>d(t.CategoryId),children:"Update"})]}),e.jsxs(I,{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Capacity:"})," ",t.Capacity]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Active:"})," ",t.Active?"Yes":"No"]})]})]},t.CategoryId))})})]})};export{R as default};
