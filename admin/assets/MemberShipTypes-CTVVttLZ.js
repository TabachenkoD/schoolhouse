import{a as g,r as n,j as e,B as x,u as N}from"./index-BXjIrL1U.js";import{a as v}from"./apiClient-D5JhjSvK.js";import{S as T}from"./scroll-area-C9u3ILJG.js";import{L as f,I as y,b,C as S,a as w,c as D,d as M}from"./label-jx94DjbD.js";const P=({selectedType:t,handleTypeUpdated:a,isAuthenticated:h,resetType:u})=>{const{toast:r}=g(),[i,c]=n.useState(""),[l,d]=n.useState(""),s=i&&l&&t;n.useEffect(()=>{t?(c(t.Description),d(t.Price)):o()},[t]);const o=()=>{c(""),d(""),u()},m=p=>{p.preventDefault();const C={...t,Description:i,Price:l};v("/admin/membershiptypes/update",h,{method:"POST",body:JSON.stringify(C)}).then(j=>{r({variant:"success",description:"Type updated successfully"}),o(),a()}).catch(j=>{r({variant:"destructive",description:`${j}`})})};return e.jsxs("form",{onSubmit:m,className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-x-4",children:[e.jsxs("div",{className:"w-2/4",children:[e.jsx(f,{htmlFor:"title",children:"Title"}),e.jsx(y,{id:"title",value:i,onChange:p=>c(p.target.value),required:!0})]}),e.jsxs("div",{className:"w-2/4",children:[e.jsx(f,{htmlFor:"Capacity",children:"Price"}),e.jsx(y,{id:"Capacity",type:"number",min:"0",value:l,onChange:p=>d(p.target.value),required:!0})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(x,{type:"reset",variant:"secondary",onClick:o,children:"Reset"}),e.jsx(x,{type:"submit",disabled:!s,children:"Update type"})]})]})},q=()=>{const{isAuthenticated:t}=N(),[a,h]=n.useState([]),[u,r]=n.useState(null);n.useEffect(()=>{i()},[]);const i=()=>{t&&v("/admin/membershiptypes",t).then(s=>{h(s)}).catch(s=>{console.error("Ошибка при получении данных классов:",s)})},c=s=>{const o=a.find(m=>m.MembershipTypeId===s);r(o)},l=()=>{i(),r(null)},d=()=>r(null);return e.jsxs("div",{className:"overflow-hidden flex flex-row h-full w-full",children:[e.jsxs("div",{className:"w-[60%] p-4",children:[e.jsx(b,{className:"mb-4",children:" Update type "}),e.jsx(P,{selectedType:u,handleTypeUpdated:l,isAuthenticated:t,resetType:d})]}),e.jsx(T,{className:"border-l overflow-hidden flex-1 h-full w-[40%] overflow-auto max-h-screen",children:e.jsx("div",{className:"p-4 space-y-4",children:a.length===0?e.jsx("p",{children:"No membership types available"}):a.map(s=>e.jsxs(S,{children:[e.jsxs(w,{className:"flex-row justify-between items-top",children:[e.jsxs("div",{children:[e.jsx(b,{children:s.Description}),e.jsxs(D,{children:["MembershipTypeId: ",s.MembershipTypeId]})]}),e.jsx(x,{style:{margin:0},variant:"orange",size:"sm",onClick:()=>c(s.MembershipTypeId),children:"Update"})]}),e.jsxs(M,{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Adults Count:"})," ",s.AdultsCount]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Guess Count:"})," ",s.GuessCount]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Kids Count:"})," ",s.KidsCount]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Price:"})," ",s.Price]})]})]},s.MembershipTypeId))})})]})};export{q as default};
