import{c as fe,r as a,a as ve,b as je,j as e,P as ee,d as H,e as ge,f as L,g as se,B as S,u as ye}from"./index-D7UtJkO3.js";import{a as D,S as be}from"./scroll-area-B6hqRRsp.js";import{L as d,I as V,b as Y,C as Ce,a as Ee,c as ke,d as Ne}from"./label-TL96Cb40.js";import{C as Se,P as U,a as $,b as B,f as w,c as K,S as W,d as X,e as J,g as G,h as Q}from"./popover-BM6X04ZE.js";import{u as Re,a as we,S as Z}from"./switch-D6SEgrgH.js";var O="Checkbox",[De,ze]=fe(O),[Pe,Fe]=De(O),te=a.forwardRef((t,o)=>{const{__scopeCheckbox:r,name:f,checked:u,defaultChecked:c,required:h,disabled:x,value:p="on",onCheckedChange:j,...n}=t,[i,C]=a.useState(null),b=ve(o,l=>C(l)),E=a.useRef(!1),g=i?!!i.closest("form"):!0,[v=!1,m]=je({prop:u,defaultProp:c,onChange:j}),N=a.useRef(v);return a.useEffect(()=>{const l=i==null?void 0:i.form;if(l){const y=()=>m(N.current);return l.addEventListener("reset",y),()=>l.removeEventListener("reset",y)}},[i,m]),e.jsxs(Pe,{scope:r,state:v,disabled:x,children:[e.jsx(ee.button,{type:"button",role:"checkbox","aria-checked":k(v)?"mixed":v,"aria-required":h,"data-state":re(v),"data-disabled":x?"":void 0,disabled:x,value:p,...n,ref:b,onKeyDown:H(t.onKeyDown,l=>{l.key==="Enter"&&l.preventDefault()}),onClick:H(t.onClick,l=>{m(y=>k(y)?!0:!y),g&&(E.current=l.isPropagationStopped(),E.current||l.stopPropagation())})}),g&&e.jsx(Te,{control:i,bubbles:!E.current,name:f,value:p,checked:v,required:h,disabled:x,style:{transform:"translateX(-100%)"}})]})});te.displayName=O;var ae="CheckboxIndicator",ne=a.forwardRef((t,o)=>{const{__scopeCheckbox:r,forceMount:f,...u}=t,c=Fe(ae,r);return e.jsx(ge,{present:f||k(c.state)||c.state===!0,children:e.jsx(ee.span,{"data-state":re(c.state),"data-disabled":c.disabled?"":void 0,...u,ref:o,style:{pointerEvents:"none",...t.style}})})});ne.displayName=ae;var Te=t=>{const{control:o,checked:r,bubbles:f=!0,...u}=t,c=a.useRef(null),h=Re(r),x=we(o);return a.useEffect(()=>{const p=c.current,j=window.HTMLInputElement.prototype,i=Object.getOwnPropertyDescriptor(j,"checked").set;if(h!==r&&i){const C=new Event("click",{bubbles:f});p.indeterminate=k(r),i.call(p,k(r)?!1:r),p.dispatchEvent(C)}},[h,r,f]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:k(r)?!1:r,...u,tabIndex:-1,ref:c,style:{...t.style,...x,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function k(t){return t==="indeterminate"}function re(t){return k(t)?"indeterminate":t?"checked":"unchecked"}var ce=te,Ae=ne;const le=a.forwardRef(({className:t,...o},r)=>e.jsx(ce,{ref:r,className:L("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...o,children:e.jsx(Ae,{className:L("flex items-center justify-center text-current"),children:e.jsx(Se,{className:"h-4 w-4"})})}));le.displayName=ce.displayName;const ie=a.forwardRef(({className:t,...o},r)=>e.jsx("textarea",{className:L("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none disabled:cursor-not-allowed disabled:opacity-50 resize-none",t),ref:r,...o}));ie.displayName="Textarea";const qe=[{label:"2 mo - 2 yrs",color:"#00BFFF"},{label:"15 mo - 2.5 yrs",color:"#3366CC"},{label:"18 mo & Up",color:"#800080"},{label:"2.5 yrs - 5 yrs",color:"#FFA500"},{label:"3 yrs & Up",color:"#FF69B4"},{label:"All Ages",color:"#32CD32"}],Me=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],Ie=({selectedClassId:t,onClassUpdated:o,isAuthenticated:r,resetClassId:f})=>{const{toast:u}=se(),[c,h]=a.useState(""),[x,p]=a.useState(""),[j,n]=a.useState(""),[i,C]=a.useState(""),[b,E]=a.useState(null),[g,v]=a.useState(null),[m,N]=a.useState([]),[l,y]=a.useState(!1),[P,F]=a.useState(""),[T,A]=a.useState(!1),[R,_]=a.useState(!1),[oe,de]=a.useState([]),ue=c&&x&&j&&i&&b&&g&&m&&P;a.useEffect(()=>{t?D(`/events/${t}/details`,r).then(s=>{h(s.Title),n(s.AgeRange),p(s.Category),C(s.Description),E(new Date(s.EventStartDate)),v(new Date(s.EventEndDate)),N(s.EventRecurrency.split(", ")),y(s.RequirePayment),F(s.Capacity),A(s.IsEnabled),_(!0)}).catch(s=>{u({variant:"destructive",description:`${s}`})}):q()},[t]),a.useEffect(()=>{D("/admin/eventcat",r).then(s=>{de(s)})},[]);const q=()=>{h(""),n(""),p(""),C(""),E(null),v(null),N([]),y(!1),F(""),A(!1),_(!1),f()},he=s=>{s.preventDefault();const M=b?w(b,"MM/dd/yyyy"):"",pe=g?w(g,"MM/dd/yyyy"):"",me=m.join(", "),z={Title:c,AgeRange:j,Category:x,Description:i,EventStartDate:M,EventEndDate:pe,EventRecurrency:me,Capacity:Number(P),RequirePayment:l,IsEnabled:T};R&&t&&(z.ClassEventId=t),D(R?"/events/update":"/events",r,{method:"POST",body:JSON.stringify(z)}).then(I=>{u({variant:"success",description:`${R?"Event updated successfully":`Event ${I} created successfully `}`}),q(),o()}).catch(I=>{u({variant:"destructive",description:`${I}`})})},xe=s=>{m.includes(s)?N(m.filter(M=>M!==s)):N([...m,s])};return e.jsxs("form",{onSubmit:he,className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(d,{htmlFor:"title",children:"Title"}),e.jsx(V,{id:"title",value:c,onChange:s=>h(s.target.value),required:!0})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(d,{htmlFor:"description",children:"Description"}),e.jsx(ie,{id:"description",value:i,onChange:s=>C(s.target.value),required:!0})]}),e.jsxs("div",{className:"flex gap-x-4",children:[e.jsxs("div",{className:"flex flex-col gap-2 w-1/3",children:[e.jsx(d,{children:"Event Recurrency"}),e.jsxs(U,{children:[e.jsx($,{asChild:!0,children:e.jsx(S,{variant:"outline",className:"overflow-hidden text-ellipsis whitespace-nowrap max-w-full",children:m.length>0?m.join(", "):"Select days of the week"})}),e.jsx(B,{className:"p-2",children:e.jsx("div",{className:"grid gap-1",children:Me.map(s=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{id:`day-${s}`,checked:m.includes(s),onCheckedChange:()=>xe(s),className:"data-[state=checked]:bg-dark-blue "}),e.jsx(d,{htmlFor:`day-${s}`,children:s})]},s))})})]})]}),e.jsxs("div",{className:"flex flex-col gap-2 w-1/3",children:[e.jsx(d,{children:"Event Start Date"}),e.jsxs(U,{className:"p-0",children:[e.jsx($,{asChild:!0,children:e.jsx(S,{variant:"outline",children:b?w(b,"MM/dd/yyyy"):"Pick a date"})}),e.jsx(B,{className:"p-0",children:e.jsx(K,{mode:"single",selected:b,onSelect:E,className:"rounded-md border"})})]})]}),e.jsxs("div",{className:"flex flex-col gap-2 w-1/3",children:[e.jsx(d,{children:"Event End Date"}),e.jsxs(U,{className:"p-0",children:[e.jsx($,{asChild:!0,children:e.jsx(S,{variant:"outline",children:g?w(g,"MM/dd/yyyy"):"Pick a date"})}),e.jsx(B,{className:"p-0",children:e.jsx(K,{mode:"single",selected:g,onSelect:v,className:"rounded-md border"})})]})]})]}),e.jsxs("div",{className:"flex gap-x-4",children:[e.jsxs("div",{className:"w-1/3",children:[e.jsx(d,{htmlFor:"category",className:"mb-2",children:"Category"}),e.jsxs(W,{value:x,onValueChange:p,children:[e.jsx(X,{id:"category",children:e.jsx(J,{placeholder:"Select category"})}),e.jsx(G,{children:oe.map(s=>e.jsx(Q,{value:s.Title,children:e.jsx("div",{className:"flex items-center gap-3 pl-3",children:s.Title})},s.CategoryId))})]})]}),e.jsxs("div",{className:"w-1/3",children:[e.jsx(d,{htmlFor:"AgeRange",className:"mb-2",children:"Age Range"}),e.jsxs(W,{value:j,onValueChange:n,children:[e.jsx(X,{id:"AgeRange",children:e.jsx(J,{placeholder:"Select Age Range"})}),e.jsx(G,{children:qe.map(s=>e.jsx(Q,{value:s.label,children:e.jsxs("div",{className:"flex items-center gap-3 pl-3",children:[e.jsx("span",{className:"block w-3.5 h-3.5 rounded",style:{backgroundColor:s.color}}),s.label]})},s.label))})]})]}),e.jsxs("div",{className:"w-1/3",children:[e.jsx(d,{htmlFor:"capacity",children:"Capacity"}),e.jsx(V,{id:"capacity",value:P,type:"number",min:"0",onChange:s=>F(s.target.value),required:!0})]})]}),e.jsxs("div",{className:"flex gap-7",children:[e.jsxs("div",{className:"flex justify-center items-center gap-x-2",children:[e.jsx(d,{htmlFor:"require-payment",children:"Require Payment"}),e.jsx(Z,{id:"require-payment",checked:l,onCheckedChange:y,className:"data-[state=checked]:bg-dark-blue"}),e.jsx(d,{htmlFor:"require-payment",children:l?"Yes":"No"})]}),e.jsxs("div",{className:"flex justify-center items-center gap-x-2",children:[e.jsx(d,{htmlFor:"is-enabled",children:"Is Enabled"}),e.jsx(Z,{id:"is-enabled",checked:T,onCheckedChange:A,className:"data-[state=checked]:bg-dark-blue"}),e.jsx(d,{htmlFor:"is-enabled",children:T?"Yes":"No"})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(S,{type:"reset",variant:"secondary",onClick:q,children:"Reset"}),e.jsx(S,{type:"submit",disabled:!ue,children:R?"Update Event":"Create Event"})]})]})},He=()=>{const{isAuthenticated:t}=ye(),{toast:o}=se(),[r,f]=a.useState([]),[u,c]=a.useState(null);a.useEffect(()=>{h()},[]);const h=()=>{t&&D("/events",t).then(n=>{f(n)}).catch(n=>{o({variant:"destructive",description:`${n}`})})},x=n=>{c(n)},p=()=>{h(),c(null)},j=()=>c(null);return e.jsxs("div",{className:"overflow-hidden flex flex-row h-full w-full",children:[e.jsxs("div",{className:"w-[60%] p-4",children:[e.jsx(Y,{className:"mb-4",children:u?"Update event":"Create new event"}),e.jsx(Ie,{selectedClassId:u,onClassUpdated:p,isAuthenticated:t,resetClassId:j})]}),e.jsx(be,{className:"border-l overflow-hidden flex-1 h-full w-[40%] overflow-auto max-h-screen",children:e.jsx("div",{className:"p-4 space-y-4",children:r.length===0?e.jsx("p",{children:"No events available"}):r.map(n=>e.jsxs(Ce,{children:[e.jsxs(Ee,{className:"flex-row justify-between items-top",children:[e.jsxs("div",{children:[e.jsx(Y,{children:n.Title}),e.jsxs(ke,{children:["Event Id: ",n.ClassEventId]})]}),e.jsx(S,{style:{margin:0},variant:"orange",size:"sm",onClick:()=>x(n.ClassEventId),children:"Update"})]}),e.jsxs(Ne,{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Caterory:"})," ",n.Category]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Age Range:"})," ",n.AgeRange]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Start Date:"})," ",n.EventStartDate]}),e.jsxs("p",{children:[e.jsx("strong",{children:"End Date:"})," ",n.EventEndDate]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Recurrency:"})," ",n.EventRecurrency]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Description:"})," ",n.Description]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Capacity:"})," ",n.Capacity]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Payment Required:"})," ",n.RequirePayment?"Yes":"No"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Enabled:"})," ",n.IsEnabled?"Yes":"No"]})]})]},n.ClassEventId))})})]})};export{He as default};
