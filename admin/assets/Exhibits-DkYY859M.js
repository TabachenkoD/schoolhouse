import{a as G,r as i,j as e,B as D,u as k}from"./index-DfPXLp6k.js";import{a as U}from"./index-D7FekDsg.js";import"./scroll-area-CAEsBuJn.js";import{L as m,I as S,b as T,C as q,a as H,c as M,d as R}from"./label-DCFKsv9z.js";import{T as B,a as _,b as I,c as w}from"./tabs-sbdKKbh6.js";import{T as z,S as K,a as W,b as X,c as Y,d as $}from"./textarea-DtnbrFb6.js";import{D as J,a as Q,b as Z,c as ee}from"./dialog-DemGjJ_G.js";import"./Combination-BpI4QN9m.js";import"./index-D39iAc78.js";import"./index-Cc9uxuKn.js";const L=({exhibitId:a,isAuthenticated:f,resetExhibit:x,fetchExhibits:b})=>{const{toast:r}=G(),[n,d]=i.useState(""),[h,l]=i.useState(""),[u,s]=i.useState(""),[v,C]=i.useState(""),[F,E]=i.useState(null),[g,N]=i.useState(!1),A=n&&h&&u&&v&&F;i.useEffect(()=>{a?U(`/exhibits/${a}/details`,f).then(t=>{d(t.Title),l(t.Description),s(t.Floors),C(t.Groups),E(null),N(!0)}).catch(t=>{r({variant:"destructive",description:`${t}`})}):y()},[a]);const y=()=>{d(""),l(""),s(""),C(""),E(null),N(!1),typeof x=="function"&&x()},O=async t=>{t.preventDefault();const o=new FormData;o.append("exhibit",n),o.append("description",h),o.append("floor",u),o.append("group",v),o.append("image",F),g&&o.append("id",Number(a));const P=g?"/exhibits/update":"/exhibits",V="https://schoolhouse.hnhexpresssolutions.com";try{const c=await fetch(`${V}${P}`,{method:"POST",body:o,headers:{"X-API-KEY":f}});if(c.ok){const j=c.headers.get("content-type");let p=null;j&&j.includes("application/json")&&(p=await c.json()),r({variant:"success",description:`${g?"Exhibit updated successfully":`Exhibit ${p||""} created successfully`}`}),y(),b()}else{const j=c.headers.get("content-type");let p="An error occurred.";j&&j.includes("application/json")&&(p=(await c.json()).Message),r({variant:"destructive",description:p})}}catch(c){r({variant:"destructive",description:`${c}`})}};return e.jsxs("form",{onSubmit:O,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(m,{htmlFor:"title",children:"Title"}),e.jsx(S,{id:"title",type:"text",value:n,onChange:t=>d(t.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"description",children:"Description"}),e.jsx(z,{id:"description",value:h,onChange:t=>l(t.target.value)})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"floor",className:"mb-2",children:"Floor"}),e.jsxs(K,{value:u,onValueChange:s,children:[e.jsx(W,{id:"floor",children:e.jsx(X,{placeholder:"Select floor"})}),e.jsxs(Y,{children:[e.jsx($,{value:"First floor",children:"First floor"}),e.jsx($,{value:"Second floor",children:"Second floor"})]})]})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"group",children:"Group"}),e.jsx(S,{id:"group",type:"text",value:v,onChange:t=>C(t.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"file",children:"Image"}),e.jsx(S,{id:"file",type:"file",accept:"image/*",onChange:t=>E(t.target.files[0]),required:!0})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(D,{type:"reset",variant:"secondary",onClick:y,children:"Reset"}),e.jsx(D,{type:"submit",disabled:!A,children:g?"Update Exhibit":"Create Exhibit"})]})]})},se="https://schoolhouse.hnhexpresssolutions.com/Content/Images/Exhibits/",xe=()=>{const{isAuthenticated:a}=k(),{toast:f}=G(),[x,b]=i.useState([]),[r,n]=i.useState(!1),[d,h]=i.useState(null);i.useEffect(()=>{l()},[]);const l=()=>{a&&U("/exhibits",a).then(s=>{b(s)}).catch(s=>{f({variant:"destructive",description:`${s}`})})},u=()=>{h(null),n(!1)};return e.jsxs("div",{className:"overflow-hidden flex flex-row h-full w-full",children:[e.jsxs(B,{defaultValue:"List",className:"w-full",children:[e.jsxs(_,{children:[e.jsx(I,{value:"List",children:"List"}),e.jsx(I,{value:"Create",children:"Create"})]}),e.jsxs(w,{value:"List",children:[e.jsx("div",{className:"p-4",children:e.jsx(T,{className:"mb-4",children:"Exhibits"})}),e.jsx("div",{className:"flex flex-wrap gap-y-4 px-4 gap-x-4",children:x.length===0?e.jsx("p",{children:"No exhibits available"}):x.map(s=>e.jsxs(q,{className:"w-[420px]",children:[e.jsxs(H,{className:"flex-row justify-between items-top",children:[e.jsxs("div",{children:[e.jsx(T,{children:s.Title}),e.jsxs(M,{children:["Exhibit Id: ",s.ExhibitId]})]}),e.jsx(D,{style:{margin:0},variant:"orange",size:"sm",onClick:()=>{h(s.ExhibitId),n(!0)},children:"Update"})]}),e.jsxs(R,{children:[e.jsx("img",{src:`${se}/${s.ExhibitImageName}`,alt:s.Title,style:{maxWidth:"370px"}}),e.jsxs("p",{children:[e.jsx("strong",{children:"Description:"})," ",s.Description]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Floor:"})," ",s.Floors]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Group:"})," ",s.Groups]})]})]},s.ExhibitId))})]}),e.jsx(w,{value:"Create",children:e.jsxs("div",{className:"p-4",children:[e.jsx(T,{className:"mb-4",children:"Create exhibit"}),e.jsx("div",{className:"w-1/3",children:e.jsx(L,{isAuthenticated:a,fetchExhibits:l})})]})})]}),r&&e.jsx(J,{open:r,onOpenChange:n,children:e.jsxs(Q,{children:[e.jsx(Z,{children:e.jsx(ee,{children:"Update Exhibit"})}),d?e.jsx(L,{exhibitId:d,isAuthenticated:a,resetExhibit:u,fetchExhibits:l}):e.jsx("p",{children:"Loading..."})]})})]})};export{xe as default};
