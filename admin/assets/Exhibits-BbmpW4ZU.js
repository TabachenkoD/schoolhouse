import{g as L,r as i,j as e,B as T,u as k}from"./index-CATiRmyn.js";import{a as G}from"./scroll-area-BgjeX4Ev.js";import{L as j,I as y,b as S,C as H,a as M,c as R,d as B}from"./label-BvntCbO8.js";import{T as _,a as q,b as I,c as N}from"./tabs-BEqCODDB.js";import{T as z,S as K,a as W,b as X,c as Y,d as w}from"./textarea-BK4ye9zv.js";import{D as J,a as Q,b as Z,c as ee}from"./dialog-CugqGjFu.js";import"./Combination-_giSVWmD.js";import"./index-DnzASZZM.js";import"./index-w0MBtJ0V.js";const $=({exhibitId:a,isAuthenticated:m,resetExhibit:x,fetchExhibits:b})=>{const{toast:r}=L(),[n,d]=i.useState(""),[h,l]=i.useState(""),[f,s]=i.useState(""),[D,v]=i.useState(""),[U,C]=i.useState(null),[g,F]=i.useState(!1),A=n&&h;i.useEffect(()=>{a?G(`/exhibits/${a}/details`,m).then(t=>{d(t.Title),l(t.Description),s(t.Floors),v(t.Groups),C(null),F(!0)}).catch(t=>{r({variant:"destructive",description:`${t}`})}):E()},[a]);const E=()=>{d(""),l(""),s(""),v(""),C(null),F(!1),typeof x=="function"&&x()},O=async t=>{t.preventDefault();const o=new FormData;o.append("exhibit",n),o.append("description",h),o.append("floor",f),o.append("group",D),o.append("Image",U),g&&o.append("id",Number(a));const P=g?"/exhibits/update":"/exhibits",V="https://schoolhouse.hnhexpresssolutions.com";try{const c=await fetch(`${V}${P}`,{method:"POST",body:o,headers:{"X-API-KEY":m}});if(c.ok){const u=c.headers.get("content-type");let p=null;u&&u.includes("application/json")&&(p=await c.json()),r({variant:"success",description:`${g?"Exhibit updated successfully":`Exhibit ${p||""} created successfully`}`}),E(),b()}else{const u=c.headers.get("content-type");let p="An error occurred.";u&&u.includes("application/json")&&(p=(await c.json()).Message),r({variant:"destructive",description:p})}}catch(c){r({variant:"destructive",description:`${c}`})}};return e.jsxs("form",{onSubmit:O,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(j,{htmlFor:"title",children:"Title"}),e.jsx(y,{id:"title",type:"text",value:n,onChange:t=>d(t.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"description",children:"Description"}),e.jsx(z,{id:"description",value:h,onChange:t=>l(t.target.value)})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"floor",className:"mb-2",children:"Floor"}),e.jsxs(K,{value:f,onValueChange:s,children:[e.jsx(W,{id:"floor",children:e.jsx(X,{placeholder:"Select floor"})}),e.jsxs(Y,{children:[e.jsx(w,{value:"First floor",children:"First floor"}),e.jsx(w,{value:"Second floor",children:"Second floor"})]})]})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"group",children:"Group"}),e.jsx(y,{id:"group",type:"text",value:D,onChange:t=>v(t.target.value)})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"file",children:"Image"}),e.jsx(y,{id:"file",type:"file",accept:"image/*",onChange:t=>C(t.target.files[0])})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(T,{type:"reset",variant:"secondary",onClick:E,children:"Reset"}),e.jsx(T,{type:"submit",disabled:!A,children:g?"Update Exhibit":"Create Exhibit"})]})]})},se="https://schoolhouse.hnhexpresssolutions.com/Content/Images/Exhibits/",pe=()=>{const{isAuthenticated:a}=k(),{toast:m}=L(),[x,b]=i.useState([]),[r,n]=i.useState(!1),[d,h]=i.useState(null);i.useEffect(()=>{l()},[]);const l=()=>{a&&G("/exhibits",a).then(s=>{b(s)}).catch(s=>{m({variant:"destructive",description:`${s}`})})},f=()=>{h(null),n(!1)};return e.jsxs("div",{className:"overflow-hidden flex flex-row h-full w-full",children:[e.jsxs(_,{defaultValue:"List",className:"w-full",children:[e.jsxs(q,{children:[e.jsx(I,{value:"List",children:"List"}),e.jsx(I,{value:"Create",children:"Create"})]}),e.jsxs(N,{value:"List",children:[e.jsx("div",{className:"p-4",children:e.jsx(S,{className:"mb-4",children:"Exhibits"})}),e.jsx("div",{className:"flex flex-wrap gap-y-4 px-4 gap-x-4",children:x.length===0?e.jsx("p",{children:"No exhibits available"}):x.map(s=>e.jsxs(H,{className:"w-[420px]",children:[e.jsxs(M,{className:"flex-row justify-between items-top",children:[e.jsxs("div",{children:[e.jsx(S,{children:s.Title}),e.jsxs(R,{children:["Exhibit Id: ",s.ExhibitId]})]}),e.jsx(T,{style:{margin:0},variant:"orange",size:"sm",onClick:()=>{h(s.ExhibitId),n(!0)},children:"Update"})]}),e.jsxs(B,{children:[e.jsx("img",{src:`${se}/${s.ExhibitImageName}`,alt:s.Title,style:{maxWidth:"370px"}}),e.jsxs("p",{children:[e.jsx("strong",{children:"Description:"})," ",s.Description]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Floor:"})," ",s.Floors]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Group:"})," ",s.Groups]})]})]},s.ExhibitId))})]}),e.jsx(N,{value:"Create",children:e.jsxs("div",{className:"p-4",children:[e.jsx(S,{className:"mb-4",children:"Create exhibit"}),e.jsx("div",{className:"w-1/3",children:e.jsx($,{isAuthenticated:a,fetchExhibits:l})})]})})]}),r&&e.jsx(J,{open:r,onOpenChange:n,children:e.jsxs(Q,{children:[e.jsx(Z,{children:e.jsx(ee,{children:"Update Exhibit"})}),d?e.jsx($,{exhibitId:d,isAuthenticated:a,resetExhibit:f,fetchExhibits:l}):e.jsx("p",{children:"Loading..."})]})})]})};export{pe as default};
